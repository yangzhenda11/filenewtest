function orgAddSave(){var a=$("#curTaborgKind").val(),r=$("#orgAddForm"+a).serializeArray(),e={};$.each(r,function(a,r){e[r.name]=r.value}),e.orgKind=a,e.staffOrgId=curStaffOrgId,$.ajax({type:"POST",url:serverPath+"orgs/",contentType:"application/json",data:JSON.stringify(e),success:function(r){alert("组织添加"+r.message),loadOrgKindTab(a)},error:function(){alert("组织添加失败")}})}function orgAddBackFun(a,r,e){var o=$("#curTaborgKind").val();$("input[name='parentName']",$("#orgAddForm"+o)).val(r),$("input[name='parentId']",$("#orgAddForm"+o)).val(a),$("input[name='parentCode']",$("#orgAddForm"+o)).val(e),$("#orgAddForm"+o).data("bootstrapValidator")&&$("#orgAddForm"+o).data("bootstrapValidator").updateStatus("parentName","NOT_VALIDATED",null).validateField("parentName")}function orgAddGetOrgTree(a){var r=curOrgId;selectOrgTree("orgTree",a,r,orgAddBackFun,"","1","","")}!function(a){a.fn.bootstrapValidator.validators.orgCodeCheck={html5Attributes:{message:"message",field:"field"},validate:function(){return!0}}}(window.jQuery),$(function(){var a=$("#curTaborgKind").val();$("#orgAddForm"+a).bootstrapValidator(orgAddCheckValidator),$("input[name='orgCode']","#orgAddForm").blur(function(){var r=$("input[name='orgCode']","#orgAddForm"+a).val();""!=r&&$.get(serverPath+"orgs/orgCode",{orgCode:r},function(r){if("1"==r.status)if(""==r.data||null==r.data);else{$("#orgAddForm"+a).data("bootstrapValidator").updateStatus("orgCode","INVALID","orgCodeCheck")}else alert(r.message)})})});var orgAddCheckValidator={message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{orgName:{validators:{notEmpty:{message:"请输入组织名称"},stringLength:{min:0,max:64,message:"组织名称不能超过64个字符"}}},orgCode:{validators:{notEmpty:{message:"请输入组织编码"},stringLength:{min:0,max:64,message:"组织编码不能超过64位"},orgCodeCheck:{message:"此组织编号已经存在"}}},orgType:{validators:{notEmpty:{message:"请选择组织类型"}}},parentName:{validators:{notEmpty:{message:"请选择父级组织"}}}},submitHandler:function(){orgAddSave()}};