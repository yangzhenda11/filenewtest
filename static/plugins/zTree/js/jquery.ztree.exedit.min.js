!function(e){var t={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},o={onHoverOverNode:function(e,t){var d=i.getSetting(e.data.treeId),r=i.getRoot(d);r.curHoverNode!=t&&o.onHoverOutNode(e),r.curHoverNode=t,a.addHoverDom(d,t)},onHoverOutNode:function(e){var e=i.getSetting(e.data.treeId),t=i.getRoot(e);t.curHoverNode&&!i.isSelectedNode(e,t.curHoverNode)&&(a.removeTreeDom(e,t.curHoverNode),t.curHoverNode=null)},onMousedownNode:function(o,d){function s(o){if(0==m.dragFlag&&Math.abs(L-o.clientX)<v.edit.drag.minMoveSize&&Math.abs(A-o.clientY)<v.edit.drag.minMoveSize)return!0;var d,s,u,N;if(M.css("cursor","pointer"),0==m.dragFlag){if(0==r.apply(v.callback.beforeDrag,[v.treeId,E],!0))return c(o),!0;for(d=0,s=E.length;s>d;d++)0==d&&(m.dragNodeShowBefore=[]),u=E[d],i.nodeIsParent(v,u)&&u.open?(a.expandCollapseNode(v,u,!u.open),m.dragNodeShowBefore[u.tId]=!0):m.dragNodeShowBefore[u.tId]=!1;m.dragFlag=1,p.showHoverDom=!1,r.showIfameMask(v,!0),N=!0;var g=-1;if(E.length>1){var T=E[0].parentTId?i.nodeChildren(v,E[0].getParentNode()):i.getNodes(v);for(u=[],d=0,s=T.length;s>d;d++)if(void 0!==m.dragNodeShowBefore[T[d].tId]&&(N&&g>-1&&g+1!==d&&(N=!1),u.push(T[d]),g=d),E.length===u.length){E=u;break}}for(N&&(R=E[0].getPreNode(),P=E[E.length-1].getNextNode()),I=l("<ul class='zTreeDragUL'></ul>",v),d=0,s=E.length;s>d;d++)u=E[d],u.editNameFlag=!1,a.selectNode(v,u,d>0),a.removeTreeDom(v,u),d>v.edit.drag.maxShowNodeNum-1||(N=l("<li id='"+u.tId+"_tmp'></li>",v),N.append(l(u,n.id.A,v).clone()),N.css("padding","0"),N.children("#"+u.tId+n.id.A).removeClass(n.node.CURSELECTED),I.append(N),d==v.edit.drag.maxShowNodeNum-1&&(N=l("<li id='"+u.tId+"_moretmp'><a>  ...  </a></li>",v),I.append(N)));I.attr("id",E[0].tId+n.id.UL+"_tmp"),I.addClass(v.treeObj.attr("class")),I.appendTo(M),h=l("<span class='tmpzTreeMove_arrow'></span>",v),h.attr("id","zTreeMove_arrow_tmp"),h.appendTo(M),v.treeObj.trigger(n.event.DRAG,[o,v.treeId,E])}if(1==m.dragFlag){b&&h.attr("id")==o.target.id&&k&&o.clientX+C.scrollLeft()+2>e("#"+k+n.id.A,b).offset().left?(u=e("#"+k+n.id.A,b),o.target=u.length>0?u.get(0):o.target):b&&(b.removeClass(n.node.TMPTARGET_TREE),k&&e("#"+k+n.id.A,b).removeClass(n.node.TMPTARGET_NODE+"_"+n.move.TYPE_PREV).removeClass(n.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(n.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),k=b=null,w=!1,_=v,u=i.getSettings();for(var f in u)u[f].treeId&&u[f].edit.enable&&u[f].treeId!=v.treeId&&(o.target.id==u[f].treeId||e(o.target).parents("#"+u[f].treeId).length>0)&&(w=!0,_=u[f]);f=C.scrollTop(),N=C.scrollLeft(),g=_.treeObj.offset(),d=_.treeObj.get(0).scrollHeight,u=_.treeObj.get(0).scrollWidth,s=o.clientY+f-g.top;var O=_.treeObj.height()+g.top-o.clientY-f,x=o.clientX+N-g.left,j=_.treeObj.width()+g.left-o.clientX-N,g=s<v.edit.drag.borderMax&&s>v.edit.drag.borderMin,T=O<v.edit.drag.borderMax&&O>v.edit.drag.borderMin,z=x<v.edit.drag.borderMax&&x>v.edit.drag.borderMin,B=j<v.edit.drag.borderMax&&j>v.edit.drag.borderMin,O=s>v.edit.drag.borderMin&&O>v.edit.drag.borderMin&&x>v.edit.drag.borderMin&&j>v.edit.drag.borderMin,x=g&&_.treeObj.scrollTop()<=0,j=T&&_.treeObj.scrollTop()+_.treeObj.height()+10>=d,H=z&&_.treeObj.scrollLeft()<=0,F=B&&_.treeObj.scrollLeft()+_.treeObj.width()+10>=u;if(o.target&&r.isChildOrSelf(o.target,_.treeId)){for(var V=o.target;V&&V.tagName&&!r.eqs(V.tagName,"li")&&V.id!=_.treeId;)V=V.parentNode;var U=!0;for(d=0,s=E.length;s>d;d++){if(u=E[d],V.id===u.tId){U=!1;break}if(l(u,v).find("#"+V.id).length>0){U=!1;break}}U&&o.target&&r.isChildOrSelf(o.target,V.id+n.id.A)&&(b=e(V),k=V.id)}if(u=E[0],O&&r.isChildOrSelf(o.target,_.treeId)&&(!b&&(o.target.id==_.treeId||x||j||H||F)&&(w||!w&&u.parentTId)&&(b=_.treeObj),g?_.treeObj.scrollTop(_.treeObj.scrollTop()-10):T&&_.treeObj.scrollTop(_.treeObj.scrollTop()+10),z?_.treeObj.scrollLeft(_.treeObj.scrollLeft()-10):B&&_.treeObj.scrollLeft(_.treeObj.scrollLeft()+10),b&&b!=_.treeObj&&b.offset().left<_.treeObj.offset().left&&_.treeObj.scrollLeft(_.treeObj.scrollLeft()+b.offset().left-_.treeObj.offset().left)),I.css({top:o.clientY+f+3+"px",left:o.clientX+N+3+"px"}),d=N=0,b&&b.attr("id")!=_.treeId){var G=null==k?null:i.getNodeCache(_,k),g=(o.ctrlKey||o.metaKey)&&v.edit.drag.isMove&&v.edit.drag.isCopy||!v.edit.drag.isMove&&v.edit.drag.isCopy;s=!(!R||k!==R.tId),z=!(!P||k!==P.tId),T=u.parentTId&&u.parentTId==k,u=(g||!z)&&r.apply(_.edit.drag.prev,[_.treeId,E,G],!!_.edit.drag.prev),s=(g||!s)&&r.apply(_.edit.drag.next,[_.treeId,E,G],!!_.edit.drag.next),g=!(!g&&T||_.data.keep.leaf&&!i.nodeIsParent(v,G)||!r.apply(_.edit.drag.inner,[_.treeId,E,G],!!_.edit.drag.inner)),T=function(){b=null,k="",S=n.move.TYPE_INNER,h.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)},u||s||g?(z=e("#"+k+n.id.A,b),B=G.isLastNode?null:e("#"+G.getNextNode().tId+n.id.A,b.next()),O=z.offset().top,x=z.offset().left,j=u?g?.25:s?.5:1:-1,H=s?g?.75:u?.5:0:-1,f=(o.clientY+f-O)/z.height(),(1==j||j>=f&&f>=-.2)&&u?(N=1-h.width(),d=O-h.height()/2,S=n.move.TYPE_PREV):(0==H||f>=H&&1.2>=f)&&s?(N=1-h.width(),d=null==B||i.nodeIsParent(v,G)&&G.open?O+z.height()-h.height()/2:B.offset().top-h.height()/2,S=n.move.TYPE_NEXT):g?(N=5-h.width(),d=O,S=n.move.TYPE_INNER):T(),b&&(h.css({display:"block",top:d+"px",left:x+N+"px"}),z.addClass(n.node.TMPTARGET_NODE+"_"+S),(D!=k||y!=S)&&(Y=(new Date).getTime()),G&&i.nodeIsParent(v,G)&&S==n.move.TYPE_INNER&&(f=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==G.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===G.tId&&(f=!1),f)&&(window.zTreeMoveTimer=setTimeout(function(){S==n.move.TYPE_INNER&&G&&i.nodeIsParent(v,G)&&!G.open&&(new Date).getTime()-Y>_.edit.drag.autoOpenTime&&r.apply(_.callback.beforeDragOpen,[_.treeId,G],!0)&&(a.switchNode(_,G),_.edit.drag.autoExpandTrigger&&_.treeObj.trigger(n.event.EXPAND,[_.treeId,G]))},_.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=G.tId))):T()}else S=n.move.TYPE_INNER,b&&r.apply(_.edit.drag.inner,[_.treeId,E,null],!!_.edit.drag.inner)?b.addClass(n.node.TMPTARGET_TREE):b=null,h.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);D=k,y=S,v.treeObj.trigger(n.event.DRAGMOVE,[o,v.treeId,E])}return!1}function c(o){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),y=D=null,C.unbind("mousemove",s),C.unbind("mouseup",c),C.unbind("selectstart",u),M.css("cursor",""),b&&(b.removeClass(n.node.TMPTARGET_TREE),k&&e("#"+k+n.id.A,b).removeClass(n.node.TMPTARGET_NODE+"_"+n.move.TYPE_PREV).removeClass(n.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(n.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),r.showIfameMask(v,!1),p.showHoverDom=!0,0!=m.dragFlag){m.dragFlag=0;var d,N,g;for(d=0,N=E.length;N>d;d++)g=E[d],i.nodeIsParent(v,g)&&m.dragNodeShowBefore[g.tId]&&!g.open&&(a.expandCollapseNode(v,g,!g.open),delete m.dragNodeShowBefore[g.tId]);I&&I.remove(),h&&h.remove();var T=(o.ctrlKey||o.metaKey)&&v.edit.drag.isMove&&v.edit.drag.isCopy||!v.edit.drag.isMove&&v.edit.drag.isCopy;if(!T&&b&&k&&E[0].parentTId&&k==E[0].parentTId&&S==n.move.TYPE_INNER&&(b=null),b){var f=null==k?null:i.getNodeCache(_,k);if(0==r.apply(v.callback.beforeDrop,[_.treeId,E,f,S,T],!0))a.selectNodes(O,E);else{var R=T?r.clone(E):E;d=function(){if(w){if(!T)for(var e=0,t=E.length;t>e;e++)a.removeNode(v,E[e]);S==n.move.TYPE_INNER?a.addNodes(_,f,-1,R):a.addNodes(_,f.getParentNode(),S==n.move.TYPE_PREV?f.getIndex():f.getIndex()+1,R)}else if(T&&S==n.move.TYPE_INNER)a.addNodes(_,f,-1,R);else if(T)a.addNodes(_,f.getParentNode(),S==n.move.TYPE_PREV?f.getIndex():f.getIndex()+1,R);else if(S!=n.move.TYPE_NEXT)for(e=0,t=R.length;t>e;e++)a.moveNode(_,f,R[e],S,!1);else for(e=-1,t=R.length-1;t>e;t--)a.moveNode(_,f,R[t],S,!1);a.selectNodes(_,R),e=l(R[0],v).get(0),a.scrollIntoView(v,e),v.treeObj.trigger(n.event.DROP,[o,_.treeId,R,f,S,T])},S==n.move.TYPE_INNER&&r.canAsync(_,f)?a.asyncNode(_,f,!1,d):d()}}else a.selectNodes(O,E),v.treeObj.trigger(n.event.DROP,[o,v.treeId,E,null,null,null])}}function u(){return!1}var N,g,v=i.getSetting(o.data.treeId),m=i.getRoot(v),p=i.getRoots();if(2==o.button||!v.edit.enable||!v.edit.drag.isCopy&&!v.edit.drag.isMove)return!0;var T=o.target,f=i.getRoot(v).curSelectedList,E=[];if(i.isSelectedNode(v,d))for(N=0,g=f.length;g>N;N++){if(f[N].editNameFlag&&r.eqs(T.tagName,"input")&&null!==T.getAttribute("treeNode"+n.id.INPUT))return!0;if(E.push(f[N]),E[0].parentTId!==f[N].parentTId){E=[d];break}}else E=[d];a.editNodeBlur=!0,a.cancelCurEditNode(v);var I,h,b,R,P,C=e(v.treeObj.get(0).ownerDocument),M=e(v.treeObj.get(0).ownerDocument.body),w=!1,_=v,O=v,D=null,y=null,k=null,S=n.move.TYPE_INNER,L=o.clientX,A=o.clientY,Y=(new Date).getTime();return r.uCanDo(v)&&C.bind("mousemove",s),C.bind("mouseup",c),C.bind("selectstart",u),o.preventDefault&&o.preventDefault(),!0}};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,{tools:{getAbs:function(e){return e=e.getBoundingClientRect(),[e.left+(document.body.scrollLeft+document.documentElement.scrollLeft),e.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(e){e.get(0)&&(e.focus(),r.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",t),o.moveStart("character",t),o.select()}},showIfameMask:function(e,t){for(var o=i.getRoot(e);o.dragMaskList.length>0;)o.dragMaskList[0].remove(),o.dragMaskList.shift();if(t)for(var d=l("iframe",e),n=0,a=d.length;a>n;n++){var s=d.get(n),c=r.getAbs(s),s=l("<div id='zTreeMask_"+n+"' class='zTreeMask' style='top:"+c[1]+"px; left:"+c[0]+"px; width:"+s.offsetWidth+"px; height:"+s.offsetHeight+"px;'></div>",e);s.appendTo(l("body",e)),o.dragMaskList.push(s)}}},view:{addEditBtn:function(e,t){if(!(t.editNameFlag||l(t,n.id.EDIT,e).length>0)&&r.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var o=l(t,n.id.A,e),d="<span class='"+n.className.BUTTON+" edit' id='"+t.tId+n.id.EDIT+"' title='"+r.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+n.id.EDIT+" style='display:none;'></span>";o.append(d),l(t,n.id.EDIT,e).bind("click",function(){return r.uCanDo(e)&&0!=r.apply(e.callback.beforeEditName,[e.treeId,t],!0)?(a.editNode(e,t),!1):!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||l(t,n.id.REMOVE,e).length>0)&&r.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var o=l(t,n.id.A,e),d="<span class='"+n.className.BUTTON+" remove' id='"+t.tId+n.id.REMOVE+"' title='"+r.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+n.id.REMOVE+" style='display:none;'></span>";o.append(d),l(t,n.id.REMOVE,e).bind("click",function(){return r.uCanDo(e)&&0!=r.apply(e.callback.beforeRemove,[e.treeId,t],!0)?(a.removeNode(e,t),e.treeObj.trigger(n.event.REMOVE,[e.treeId,t]),!1):!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(e,t){i.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(a.addEditBtn(e,t),a.addRemoveBtn(e,t)),r.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,o){var d=i.getRoot(e),s=d.curEditNode;if(s){var c=d.curEditInput,t=t?t:o?i.nodeName(e,s):c.val();if(r.apply(e.callback.beforeRename,[e.treeId,s,t,o],!0)===!1)return!1;i.nodeName(e,s,t),l(s,n.id.A,e).removeClass(n.node.CURSELECTED_EDIT),c.unbind(),a.setNodeName(e,s),s.editNameFlag=!1,d.curEditNode=null,d.curEditInput=null,a.selectNode(e,s,!1),e.treeObj.trigger(n.event.RENAME,[e.treeId,s,o])}return d.noSelection=!0},editNode:function(e,t){var o=i.getRoot(e);if(a.editNodeBlur=!1,i.isSelectedNode(e,t)&&o.curEditNode==t&&t.editNameFlag)setTimeout(function(){r.inputFocus(o.curEditInput)},0);else{t.editNameFlag=!0,a.removeTreeDom(e,t),a.cancelCurEditNode(e),a.selectNode(e,t,!1),l(t,n.id.SPAN,e).html("<input type=text class='rename' id='"+t.tId+n.id.INPUT+"' treeNode"+n.id.INPUT+" >");var d=l(t,n.id.INPUT,e);d.attr("value",i.nodeName(e,t)),e.edit.editNameSelectAll?r.inputSelect(d):r.inputFocus(d),d.bind("blur",function(){a.editNodeBlur||a.cancelCurEditNode(e)}).bind("keydown",function(t){"13"==t.keyCode?(a.editNodeBlur=!0,a.cancelCurEditNode(e)):"27"==t.keyCode&&a.cancelCurEditNode(e,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),l(t,n.id.A,e).addClass(n.node.CURSELECTED_EDIT),o.curEditInput=d,o.noSelection=!1,o.curEditNode=t}},moveNode:function(e,t,o,d,r,s){var c=i.getRoot(e);if(t!=o&&(!e.data.keep.leaf||!t||i.nodeIsParent(e,t)||d!=n.move.TYPE_INNER)){var u=o.parentTId?o.getParentNode():c,N=null===t||t==c;N&&null===t&&(t=c),N&&(d=n.move.TYPE_INNER),c=t.parentTId?t.getParentNode():c,d!=n.move.TYPE_PREV&&d!=n.move.TYPE_NEXT&&(d=n.move.TYPE_INNER),d==n.move.TYPE_INNER&&(N?o.parentTId=null:(i.nodeIsParent(e,t)||(i.nodeIsParent(e,t,!0),t.open=!!t.open,a.setNodeLineIcos(e,t)),o.parentTId=t.tId));var g;N?g=N=e.treeObj:(s||d!=n.move.TYPE_INNER?s||a.expandCollapseNode(e,t.getParentNode(),!0,!1):a.expandCollapseNode(e,t,!0,!1),N=l(t,e),g=l(t,n.id.UL,e),N.get(0)&&!g.get(0)&&(g=[],a.makeUlHtml(e,t,g,""),N.append(g.join(""))),g=l(t,n.id.UL,e));var v=l(o,e);v.get(0)?N.get(0)||v.remove():v=a.appendNodes(e,o.level,[o],null,-1,!1,!0).join(""),g.get(0)&&d==n.move.TYPE_INNER?g.append(v):N.get(0)&&d==n.move.TYPE_PREV?N.before(v):N.get(0)&&d==n.move.TYPE_NEXT&&N.after(v);var m;g=-1;var v=0,p=null,N=null,T=o.level,f=i.nodeChildren(e,u),E=i.nodeChildren(e,c),I=i.nodeChildren(e,t);if(o.isFirstNode)g=0,f.length>1&&(p=f[1],p.isFirstNode=!0);else if(o.isLastNode)g=f.length-1,p=f[g-1],p.isLastNode=!0;else for(c=0,m=f.length;m>c;c++)if(f[c].tId==o.tId){g=c;break}if(g>=0&&f.splice(g,1),d!=n.move.TYPE_INNER)for(c=0,m=E.length;m>c;c++)E[c].tId==t.tId&&(v=c);d==n.move.TYPE_INNER?(I||(I=i.nodeChildren(e,t,[])),I.length>0&&(N=I[I.length-1],N.isLastNode=!1),I.splice(I.length,0,o),o.isLastNode=!0,o.isFirstNode=1==I.length):t.isFirstNode&&d==n.move.TYPE_PREV?(E.splice(v,0,o),N=t,N.isFirstNode=!1,o.parentTId=t.parentTId,o.isFirstNode=!0,o.isLastNode=!1):t.isLastNode&&d==n.move.TYPE_NEXT?(E.splice(v+1,0,o),N=t,N.isLastNode=!1,o.parentTId=t.parentTId,o.isFirstNode=!1,o.isLastNode=!0):(d==n.move.TYPE_PREV?E.splice(v,0,o):E.splice(v+1,0,o),o.parentTId=t.parentTId,o.isFirstNode=!1,o.isLastNode=!1),i.fixPIdKeyValue(e,o),i.setSonNodeLevel(e,o.getParentNode(),o),a.setNodeLineIcos(e,o),a.repairNodeLevelClass(e,o,T),!e.data.keep.parent&&f.length<1?(i.nodeIsParent(e,u,!1),u.open=!1,t=l(u,n.id.UL,e),d=l(u,n.id.SWITCH,e),c=l(u,n.id.ICON,e),a.replaceSwitchClass(u,d,n.folder.DOCU),a.replaceIcoClass(u,c,n.folder.DOCU),t.css("display","none")):p&&a.setNodeLineIcos(e,p),N&&a.setNodeLineIcos(e,N),e.check&&e.check.enable&&a.repairChkClass&&(a.repairChkClass(e,u),a.repairParentChkClassWithSelf(e,u),u!=o.parent&&a.repairParentChkClassWithSelf(e,o)),s||a.expandCollapseParentNode(e,o.getParentNode(),!0,r)}},removeEditBtn:function(e,t){l(t,n.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){l(t,n.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,a.removeEditBtn(e,t),a.removeRemoveBtn(e,t),r.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,o){if(o!==t.level){var d=l(t,e),r=l(t,n.id.A,e),e=l(t,n.id.UL,e),o=n.className.LEVEL+o,t=n.className.LEVEL+t.level;d.removeClass(o),d.addClass(t),r.removeClass(o),r.addClass(t),e.removeClass(o),e.addClass(t)}},selectNodes:function(e,t){for(var o=0,d=t.length;d>o;o++)a.selectNode(e,t[o],o>0)}},event:{},data:{setSonNodeLevel:function(e,t,o){if(o){var d=i.nodeChildren(e,o);if(o.level=t?t.level+1:0,d)for(var t=0,r=d.length;r>t;t++)d[t]&&i.setSonNodeLevel(e,o,d[t])}}}});var d=e.fn.zTree,r=d._z.tools,n=d.consts,a=d._z.view,i=d._z.data,l=r.$;i.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),i.addInitBind(function(e){var t=e.treeObj,o=n.event;t.bind(o.RENAME,function(t,o,d,n){r.apply(e.callback.onRename,[t,o,d,n])}),t.bind(o.DRAG,function(t,o,d,n){r.apply(e.callback.onDrag,[o,d,n])}),t.bind(o.DRAGMOVE,function(t,o,d,n){r.apply(e.callback.onDragMove,[o,d,n])}),t.bind(o.DROP,function(t,o,d,n,a,i,l){r.apply(e.callback.onDrop,[o,d,n,a,i,l])})}),i.addInitUnBind(function(e){var e=e.treeObj,t=n.event;e.unbind(t.RENAME),e.unbind(t.DRAG),e.unbind(t.DRAGMOVE),e.unbind(t.DROP)}),i.addInitCache(function(){}),i.addInitNode(function(e,t,o){o&&(o.isHover=!1,o.editNameFlag=!1)}),i.addInitProxy(function(e){var t=e.target,d=i.getSetting(e.data.treeId),a=e.relatedTarget,l="",s=null,c="",u=null,N=null;if(r.eqs(e.type,"mouseover")?(N=r.getMDom(d,t,[{tagName:"a",attrName:"treeNode"+n.id.A}]))&&(l=r.getNodeMainDom(N).id,c="hoverOverNode"):r.eqs(e.type,"mouseout")?(N=r.getMDom(d,a,[{tagName:"a",attrName:"treeNode"+n.id.A}]),N||(l="remove",c="hoverOutNode")):r.eqs(e.type,"mousedown")&&(N=r.getMDom(d,t,[{tagName:"a",attrName:"treeNode"+n.id.A}]))&&(l=r.getNodeMainDom(N).id,c="mousedownNode"),l.length>0)switch(s=i.getNodeCache(d,l),c){case"mousedownNode":u=o.onMousedownNode;break;case"hoverOverNode":u=o.onHoverOverNode;break;case"hoverOutNode":u=o.onHoverOutNode}return{stop:!1,node:s,nodeEventType:c,nodeEventCallback:u,treeEventType:"",treeEventCallback:null}}),i.addInitRoot(function(e){var e=i.getRoot(e),t=i.getRoots();e.curEditNode=null,e.curEditInput=null,e.curHoverNode=null,e.dragFlag=0,e.dragNodeShowBefore=[],e.dragMaskList=[],t.showHoverDom=!0}),i.addZTreeTools(function(e,t){t.cancelEditName=function(e){i.getRoot(this.setting).curEditNode&&a.cancelCurEditNode(this.setting,e?e:null,!0)},t.copyNode=function(t,o,d,l){if(!o)return null;var s=i.nodeIsParent(e,t);if(t&&!s&&this.setting.data.keep.leaf&&d===n.move.TYPE_INNER)return null;var c=this,u=r.clone(o);return t||(t=null,d=n.move.TYPE_INNER),d==n.move.TYPE_INNER?(o=function(){a.addNodes(c.setting,t,-1,[u],l)},r.canAsync(this.setting,t)?a.asyncNode(this.setting,t,l,o):o()):(a.addNodes(this.setting,t.parentNode,-1,[u],l),a.moveNode(this.setting,t,u,d,!1,l)),u},t.editName=function(e){e&&e.tId&&e===i.getNodeCache(this.setting,e.tId)&&(e.parentTId&&a.expandCollapseParentNode(this.setting,e.getParentNode(),!0),a.editNode(this.setting,e))},t.moveNode=function(t,o,d,s){function c(){a.moveNode(N.setting,t,o,d,!1,s)}if(!o)return o;var u=i.nodeIsParent(e,t);if(t&&!u&&this.setting.data.keep.leaf&&d===n.move.TYPE_INNER)return null;if(t&&(o.parentTId==t.tId&&d==n.move.TYPE_INNER||l(o,this.setting).find("#"+t.tId).length>0))return null;t||(t=null);var N=this;return r.canAsync(this.setting,t)&&d===n.move.TYPE_INNER?a.asyncNode(this.setting,t,s,c):c(),o},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}});var s=a.cancelPreSelectedNode;a.cancelPreSelectedNode=function(e,t){for(var o=i.getRoot(e).curSelectedList,d=0,r=o.length;r>d&&(t&&t!==o[d]||(a.removeTreeDom(e,o[d]),!t));d++);s&&s.apply(a,arguments)};var c=a.createNodes;a.createNodes=function(e,t,o,d){c&&c.apply(a,arguments),o&&a.repairParentChkClassWithSelf&&a.repairParentChkClassWithSelf(e,d)};var u=a.makeNodeUrl;a.makeNodeUrl=function(e){return e.edit.enable?null:u.apply(a,arguments)};var N=a.removeNode;a.removeNode=function(e,t){var o=i.getRoot(e);o.curEditNode===t&&(o.curEditNode=null),N&&N.apply(a,arguments)};var g=a.selectNode;a.selectNode=function(e,t){var o=i.getRoot(e);return i.isSelectedNode(e,t)&&o.curEditNode==t&&t.editNameFlag?!1:(g&&g.apply(a,arguments),a.addHoverDom(e,t),!0)};var v=r.uCanDo;r.uCanDo=function(e,t){var o=i.getRoot(e);return t&&(r.eqs(t.type,"mouseover")||r.eqs(t.type,"mouseout")||r.eqs(t.type,"mousedown")||r.eqs(t.type,"mouseup"))?!0:(o.curEditNode&&(a.editNodeBlur=!1,o.curEditInput.focus()),!o.curEditNode&&(v?v.apply(a,arguments):!0))}}(jQuery);