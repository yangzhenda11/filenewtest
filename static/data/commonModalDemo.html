<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
	<!--<![endif]-->
	<!-- BEGIN HEAD -->

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Expires" content="0">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-control" content="no-cache,must-revalidate">
		<link rel="stylesheet" type="text/css" href="../../../static/plugins/bootstrap/css/bootstrap.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/plugins/font-awesome/css/font-awesome.min.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/css/iconfont/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/plugins/datatables/datatables.min.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/plugins/zTree/css/zTreeStyle/zTreeStyle.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/plugins/zTree/css/metroStyle/metroStyle.css">
		<link rel="stylesheet" type="text/css" href="../../../static/plugins/bootstrap-fileinput/fileinput.min.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/css/adminui.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/css/custom.css" />
	</head>

	<body>
		<div class="page-content">
			<div class="portlet">
				<div class="portlet-title">
					<div class="caption font-dark">
						<span class="caption-subject bold uppercase"> 公共弹窗demo</span>
					</div>
				</div>
				<div class="portlet-body" style="overflow: hidden;">
					<div class="col-sm-4">
						<div class="input-group">
							<span class="input-group-addon searchLableText">合同类型</span>
							<input id="contractType" name="contractType" type="text" class="form-control" value="" />
							<span class="input-group-addon custorPoint" id="searchContractType"><i class="iconfont icon-search"></i></span>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="input-group">
							<span class="input-group-addon searchLableText">选择承办人</span>
							<input id="agentStaff" name="agentStaff" type="text" class="form-control" value="" />
							<span class="input-group-addon custorPoint" id="searchAgentStaff"><i class="iconfont icon-search"></i></span>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="input-group">
							<span class="input-group-addon searchLableText">选择承办部门</span>
							<input id="agentDepartment" name="agentDepartment" type="text" class="form-control" value="" />
							<span class="input-group-addon custorPoint" id="searchAgentDepartment"><i class="iconfont icon-search"></i></span>
						</div>
					</div>
					<div style="margin-top: 15px;float: left;">
						<div class="col-sm-4">
							<div class="input-group">
								<span class="input-group-addon searchLableText">合同编号</span>
								<input id="contractDataSearch" name="contractDataSearch" type="text" class="form-control" value="" />
								<span class="input-group-addon custorPoint" id="searchContractData"><i class="iconfont icon-search"></i></span>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="input-group">
								<span class="input-group-addon searchLableText">我方主体</span>
								<input id="ourSubject" name="ourSubject" type="text" class="form-control" value="" />
								<span class="input-group-addon custorPoint" id="searchOurSubject"><i class="iconfont icon-search"></i></span>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="input-group">
								<span class="input-group-addon searchLableText">对方主体</span>
								<input id="otherSubject" name="otherSubject" type="text" class="form-control" value="" />
								<span class="input-group-addon custorPoint" id="searchOtherSubject"><i class="iconfont icon-search"></i></span>
							</div>
						</div>
					</div>

					<div class="file" style="margin-top: 20px;float: left;">
						<label style="float: left;">文件上传1-bootstrapfileinput:</label>
						<div class="col-sm-5">
							<input id="fileUpload" name="fileUpload" type="text" disabled="" class="form-control" value="" />
						</div>
						<div class="col-sm-4">
							<button class="btn red" onclick="fileUpload()">选择</button>
						</div>
					</div>

					<div class="file" style="margin-top: 20px;float: left;">
						<label style="float: left;">文件上传2-ajaxfileupload:</label>
						<div class="col-sm-5">
							<input id="ajaxfileupload" name="ajaxfileupload" type="text" disabled="" class="form-control" value="" />
						</div>
						<div class="col-sm-4">
							<button class="btn red" onclick="ajaxfileupload()">选择</button>
						</div>
					</div>

					<button class="btn red" onclick="fileImport()">文件导入</button>
				</div>
			</div>
		</div>
		<!--modal-->
		<div class="modal fade" id="commomModal" role="dialog" aria-hidden="true" data-backdrop="static"></div>
		<!--[if lt IE 9]>
		  	<script src="../../../static/plugins/html5shiv.min.js"></script>
		  	<script src="../../../static/plugins/respond.min.js"></script>
		  	<script src="../../../static/plugins/ie8.fix.min.js"></script>
		<![endif]-->
		<!--[if lte IE 8]>
			<script src="../../../static/plugins/selectivizr-min.js"></script>
		<![endif]-->
		<!--基础依赖-->
		<script src="../../../static/plugins/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/datatables/datatables.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/datatables/ellipsis.js"></script>
		<script src="../../../static/plugins/zTree/js/jquery.ztree.all.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/layer/layer.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/bootstrap-fileinput/formdata.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/bootstrap-fileinput/fileinput.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/jquery.form.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../../static/plugins/ajaxfileupload/ajaxfileupload.js" type="text/javascript" charset="utf-8"></script>
		<script src="/static/js/app.js?t=1531273913211" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$("#searchContractType").click(function() {
				App.getCommonModal("contractType", "#contractType", "typeFullname", "typeId");
			})
			$("#searchAgentStaff").click(function() {
				App.getCommonModal("agentStaff", "#agentStaff", "name", ["id", "parentId", "id"]);
			})
			$("#searchAgentDepartment").click(function() {
				App.getCommonModal("agentDepartment", "#agentDepartment", "orgName", "orgId");
			})
			$("#searchContractData").click(function() {
				App.getCommonModal("contractDataSearch", "#contractDataSearch", "contractNumber", ["contractId", "contractNumber", "contractName", "partyName"]);
			})
			$("#searchOurSubject").click(function() {
				App.getCommonModal("ourSubject", "#ourSubject", "partnerName", "partnerId");
			})
			$("#searchOtherSubject").click(function() {
				App.getCommonModal("otherSubject", "#otherSubject", "partnerName", "partnerId");
			})
			$("#otherSubject").on("change", function() {
				$(this).data("exactSearch", false);
			});

			function fileUpload() {
				var setting = {
					title: "文件上传测试",
					url: 'fileload/uploadFileS3', //上传地址，非空
					maxNumber: 3, //最大上传数量
					//uploadAsync : false,   			//ajax提交是否异步提交，参数:false|true，默认为true,可为空
					//fileExtensions:['pdf']			//上传文件类型，参数:["pdf"]多个["pdf","doc"]，默认不控制，可为空
					//					extraData:{test:123,test2:456}	//上传时额外附加的参数,业务为正文扫描件上传时要求加displayname字段，可为空
				};

				function queryCallback() { //点击确定执行的函数，必传。
					var fileInfo = getFileItemInfo(); //可以在此获取上传列表的内容，通过内置getFileItem获取；
					$("#commomModal").modal("hide"); //模态框关闭
					console.log(fileInfo);
					$("#fileUpload").val(fileInfo[0].name)
				}
				App.getFileUploadModal(setting, queryCallback);
			}

			function ajaxfileupload() {
				var setting = {
					title: "文件上传测试",
					url: 'fileload/uploadFileS3', //上传地址，非空
					maxNumber: 3, //最大上传数量
					uploadAsync: false, //ajax提交是否异步提交，参数:false|true，默认为true,可为空
					//fileExtensions:['pdf'],			//上传文件类型，参数:["pdf"]多个["pdf","doc"]，默认不控制，可为空
					extraData: {
						test: 123,
						test2: 456
					} //上传时额外附加的参数,业务为正文扫描件上传时要求加displayname字段，可为空
				};

				function queryCallback() { //点击确定执行的函数，必传。
					var fileInfo = getFileItemInfo(); //可以在此获取上传列表的内容，通过内置getFileItem获取；
					$("#commomModal").modal("hide"); //模态框关闭
					console.log(fileInfo);
				}
				App.getAjaxFileUploadModal(setting, queryCallback);
			}

			function fileImport() {
				var setting = {
					title: "文件导入测试",
					url: 'fileload/uploadFileS3',
					accept: ".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel", //选择文件windows打开选择类型
					postfix: ["xlsx", "xls"], //前端判读的文件类型后缀
					extraData: {
						test: 123,
						test2: 456
					} //导入时额外附加的参数
				};

				function successCallback() {
					$("#commomModal").modal("hide");
				}
				App.getFileImportModal(setting, successCallback);
			}
		</script>
	</body>

</html>