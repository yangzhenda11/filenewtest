var selectL2R = function() {
	function e(e) {
		var n, i = $(e).find(".selectL").children(),
			t = $(e).find(".selectR").children();
		"TABLE" == i[0].nodeName ? n = "tbody tr" : "UL" == i[0].nodeName && (n = "li");
		var s = [];
		return t.find(n).each(function() {
			var e = $(this).data("id");
			s.push(e)
		}), s
	}
	var n = function(e, n) {
		function i(e) {
			a.find(s + "." + o).each(function() {
				$(this).data("id") == e && $(this).removeClass(o)
			})
		}

		function t() {
			"tbody tr" == s && l.find(s).each(function(e) {
				$(this).find("td:first").text(e + 1)
			})
		}
		var s, a = $(e).find(".selectL").children(),
			l = $(e).find(".selectR").children(),
			d = $(e).find(".selectL2R-actions"),
			c = "warning",
			o = "success";
		if("TABLE" == a[0].nodeName ? (s = "tbody tr", $selNode = a.find("tr")) : "UL" == a[0].nodeName && (s = "li", c = "list-group-item-" + c, o = "list-group-item-" + o), a.find(s).on("click", function() {
				var e = $(this);
				e.hasClass(c) ? e.removeClass(c) : e.hasClass(o) || e.addClass(c)
			}), l.delegate(s, "click", function() {
				var e = $(this);
				e.hasClass(c) ? e.removeClass(c) : e.addClass(c)
			}), d.find(".selectL2R-select").on("click", function() {
				var e = a.find(s + "." + c);
				if(0 == e.length){
					//alert("请先在左侧列表中选择要选择的内容");
					layer.alert("请先在左侧列表中选择要选择的内容", {
                		icon: 0,
                		skin: 'layer-ext-moon'
           		 	});
				} 
				else {
					var n = e.removeClass(c).clone();
					l.append(n), t(), e.addClass(o)
				}
			}), d.find(".selectL2R-delete").on("click", function() {
				var e = l.find(s + "." + c);
				if(0 == e.length){
					//alert("请先在右侧列表中选择要移除的内容")
					layer.alert("请先在右侧列表中选择要移除的内容", {
                		icon: 0,
                		skin: 'layer-ext-moon'
           		 	});
				}else{
					e.each(function() {
						var e = $(this),
						n = e.data("id");
						e.remove(), i(n)
					})
				}
			}), d.find(".selectL2R-deleteAll").on("click", function() {
				l.find(s).remove(), a.find(s).removeClass(o)
			}), d.find(".selectL2R-selectAll").on("click", function() {
				l.find(s).remove();
				var e = a.find(s).removeClass(o).removeClass(c).addClass(o);
				l.append(e.clone().removeClass(o)), t()
			}), n && "object" == typeof n) {
			var r = n.length;
			a.find(s).each(function() {
				for(var e = $(this), i = e.data("id"), s = 0; s < r; s++)
					if(i == n[s]) {
						l.append(e.clone()), t(), e.addClass(o);
						break
					}
			})
		}
	};
	return {
		init: function(e, i) {
			n(e, i)
		},
		getResult: function(n) {
			return e(n)
		}
	}
}();