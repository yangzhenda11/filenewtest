function searchWorkOrderHandle(e){var a=$("#create_date_begin").val().trim(),t=$("#create_date_end").val().trim();if(!checkDate(a,t))return void layer.msg("创建日期开始日期不得大于截止日期！");var r=$("#workOrderHandleListTable").DataTable();e?r.ajax.reload(null,!1):r.ajax.reload()}function manualCreation(){$("#manualCreationEditModal").load("_manualCreationEdit.html",function(){$("#manualCreationEditModal").modal("show")})}function jumpSanCpyQueryDetail(e){function a(a){var t=a.data;if(0==t||2==t){var r="../workOrderEdit/workOrderEdit.html?pageType=2&taskFlag=db&taskDefinitionKey=GDCL&wcardId="+e;App.changePresentUrl(r)}else layer.alert("当前工单的状态已经发生变化，请您重新点击查询更新数据后处理。",{icon:2,title:"流程状态错误"},function(e){layer.close(e)})}App.formAjaxJson(serverPath+"contractOrderEditorController/getWcardProcessId","get",{wcardId:e},a,null,null,!1)}function checkWcardProcessId(){}function getSearchParm(){var e={contractNumber:$("#contractNumberSel").val().trim(),contractName:$("#contractNameSel").val().trim(),createDateBegin:$("#create_date_begin").val().trim(),createDateEnd:$("#create_date_end").val().trim()};return e}function exportResultExcel(){var e=getSearchParm(),a=serverPath+"workOrderHandle/workOrderHandleExportList"+App.urlEncode(e);location.href=encodeURI(a)}function checkDate(e,a){var t=new Date(e),r=new Date(a);return Date.parse(t)-Date.parse(r)>0?!1:!0}var config=top.globalConfig,serverPath=config.serverPath;App.initDataTables("#workOrderHandleListTable","#submitBtn",{ajax:{type:"POST",contentType:"application/json;charset=utf-8",url:serverPath+"workOrderHandle/workOrderHandleList",data:function(e){var a=getSearchParm();return e=$.extend(e,a),JSON.stringify(e)}},columns:[{data:null,title:"序号",className:"text-center",render:function(e,a,t,r){var n=App.getDatatablePaging("#workOrderHandleListTable").pageStart;return n+r.row+1}},{data:"contractName",title:"合同名称",className:"whiteSpaceNormal",width:"25%"},{data:"contractNumber",title:"合同编号"},{data:"wcardNumber",title:"工单编号"},{data:"wcardStatusStr",title:"工单状态"},{data:"ctreatedDate",title:"创建日期",render:function(e){return App.formatDateTime(e,"yyyy-MM-dd")}},{data:null,className:"text-center",title:"操作",render:function(e){if(e){var a=new Array;return a.push({name:"编辑",fn:"jumpSanCpyQueryDetail('"+e.wcardId+"')",icon:"iconfont icon-add"}),App.getDataTableBtn(a)}return""}}],columnDefs:[{createdCell:function(e,a,t,r,n){n>0&&6>n&&$(e).attr("title",$(e).text())}}]});