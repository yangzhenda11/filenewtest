function updateSysStaffOrg(){var t=$("#curTabstaffKind").val(),a=$("#selectedStaffId"+t).val();if(""==$("input[name='orgId']","#staffOrgEditForm"+t).val())alert("请选择组织");else{var e=$("#staffOrgEditForm"+t).serializeArray(),r={};$.each(e,function(t,a){r[a.name]=a.value}),$.ajax({type:"PUT",url:serverPath+"staffs/"+a+"/staffOrg",contentType:"application/json",data:JSON.stringify(r),success:function(){returnStaffOrgList(),alert("修改成功！")},error:function(){alert("修改失败o_o请重试...")}})}}function getStaffOrgEdit_OrgTree(t){selectOrgTree("staffEdit_OrgTree",t,curOrgId,getStaffOrgEdit_OrgTreeId,"","1","","")}function getStaffOrgEdit_OrgTreeId(t,a){$("input[name='orgName']",$("#staffOrgEditForm"+curTabstaffKind)).val(a),$("input[name='orgId']",$("#staffOrgEditForm"+curTabstaffKind)).val(t),curEditStaffOrgOrgVal!=t&&editCheckSameOrg()}function editCheckSameOrg(){var t=$("input[name='staffOrgId']","#staffOrgEditForm"+curTabstaffKind).val(),a=$("#selectedStaffId"+curTabstaffKind).val(),e=$("input[name='orgId']","#staffOrgEditForm"+curTabstaffKind).val();""!=e&&$.get(serverPath+"staffs/staffOrgOrgId",{staffId:a,orgId:e},function(a){""==a?$("#staffOrgEditForm"+curTabstaffKind).data("bootstrapValidator").updateStatus("orgName","VALID"):t!=a.staffOrgId&&$("#staffOrgEditForm"+curTabstaffKind).data("bootstrapValidator").updateStatus("orgName","INVALID","orgIdCheck")})}!function(t){t.fn.bootstrapValidator.validators.orgIdCheck={html5Attributes:{message:"message",field:"field"},validate:function(){return!0}}}(window.jQuery);var staffOrgEditValidator={message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{orgName:{validators:{notEmpty:{message:"请点击选择组织"},orgIdCheck:{message:"此组织已存在岗位"}}},duty:{validators:{stringLength:{min:0,max:100,message:"请输入不超过100个字符"}}}},submitHandler:function(){updateSysStaffOrg()}},curEditStaffOrgOrgVal;$(function(){var t=$("#selectedStaffId"+curTabstaffKind).val(),a=$("#selectedStaffOrgId"+curTabstaffKind).val();$.get(serverPath+"staffs/"+t+"/staffOrg/"+a,{},function(t){var a=t.data;for(var e in a)curEditStaffOrgOrgVal=a.orgId,"staffOrgType"==e?("J"==a[e]||"T"==a[e]?$("select[name='staffOrgType'] option[value='F']",$("#staffOrgEditForm"+curTabstaffKind)).attr("disabled","disabled"):($("select[name='staffOrgType'] option[value='J']",$("#staffOrgEditForm"+curTabstaffKind)).attr("disabled","disabled"),$("select[name='staffOrgType'] option[value='T']",$("#staffOrgEditForm"+curTabstaffKind)).attr("disabled","disabled")),$("select[name='staffOrgType'] option[value='"+a[e]+"']",$("#staffOrgEditForm"+curTabstaffKind)).attr("selected","selected")):"staffOrgStatus"==e?$("select[name='staffOrgStatus'] option[value='"+a[e]+"']",$("#staffOrgEditForm"+curTabstaffKind)).attr("selected","selected"):$("input[name='"+e+"']",$("#staffOrgEditForm"+curTabstaffKind)).val("hireDate"==e||"effectStartDate"==e||"effectEndDate"==e?a[e]?new Date(a[e]).format("YYYY-MM-dd"):"":a[e])})});