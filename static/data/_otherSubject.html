<link rel="stylesheet" type="text/css" href="../../../static/css/iconfont/iconfont.css" />
<link rel="stylesheet" type="text/css" href="../../../static/plugins/datatables/datatables.min.css" />
<style type="text/css">
	#otherSubjectTable .radioCheck{
		position: relative;
	}
	#otherSubjectTable .radioCheck .ui-radio {
		position: absolute;
		top: 36%;
		left: 36%;
	}
	
</style>
<div class="modal-dialog" role="document" style="width: 68%;">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title" id="myModalLabel">对方主体</h4>
		</div>
		<div class="modal-body">
			<div class="portlet-body">
				<div class="page-search">
					<form class="form-horizontal" action="">
						<div class="row page-search-form">
							<div class="col-sm-5">
								<div class="input-group">
									<span class="input-group-addon searchLableText">人员姓名</span>
									<input type="text" class="form-control" name="staffName" maxlength="20">
								</div>
							</div>
							<div class="input-group">
								<button type="button" id="searchBtnM" class="btn btn-block red" data-loading-text="加载中.." onclick="searchOtherSubjectData();"><i class="iconfont icon-search"></i> 查询</button>
							</div>
						</div>
					</form>
				</div>
				<table id="otherSubjectTable" class="table table-striped table-bordered table-hover table-header-fixed"></table>
			</div>

		</div>
		<div class="modal-footer">
			<button type="button" onclick="checkOtherSubject()" class="btn btn-danger btn-circle"><i class="iconfont icon-baocun"></i> 确定</button>
			<button type="button" class="btn btn-default btn-circle" data-dismiss="modal"><i class="iconfont icon-close"></i> 关闭</button>
		</div>
	</div>
</div>
<script src="../../../static/plugins/datatables/datatables.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../static/plugins/datatables/ellipsis.js"></script>
<script type="text/javascript">
	//系统全局变量获取
	var config = top.globalConfig;
	var serverPath = config.serverPath;
	var setDom = null;
	//初始化表格
	function initOtherSubjectData(dom, textValue,setKey, ajaxData) {
		setDom = dom;
		$("#modal").modal("show");
		App.initDataTables('#otherSubjectTable', "#searchBtnM", {
			ajax: {
				"type": "get", //请求方式
				"url": serverPath + 'staffPartner/getStaffPartnerList', //请求地址
				"data": function(d) { //自定义传入参数
					d.sysOrgId = config.curOrgId;
					d.staffName = $("input[name='staffName']").val();
					d.loginName = $("input[name='loginName']").val();
					d.staffStatus = $("select[name='staffStatus']").val();
					d.orgId = $("#organisation").data("id");
					return d;
				}
			},
			"columns": [{
					"data": textValue,
					"className": "text-center radioCheck",
					"title": "操作",
					"render": function(data, type, full, meta) {
						var radio = "<label class='ui-radio'><input type='radio' value = '" + data + "' name='checkRadio'><span></span></label>";
						return radio;
					}
				},
				{
					"data": "loginName",
					"title": "账号"
				},
				{
					"data": "orgName",
					"title": "组织"
				},
				{
					"data": "sex",
					"title": "性别",
					render: function(data, type, full, meta) {
						return data == 'M' ? '男' : '女';
					}
				}
			]
		});
		//行点击事件  
		$('#otherSubjectTable tbody').on('click', 'tr', function() {
			$(this).find("input[name='checkRadio']").prop("checked", true);
			//获取选择行的内容
			//var data = $('#otherSubjectTable').DataTable().row(this).data();
		});
	}
	//搜索点击事件
	function searchOtherSubjectData() {
		var table = $('#otherSubjectTable').DataTable();
		table.ajax.reload();
	}
	//点击确定页面dom元素选择值
	function checkOtherSubject() {
		var checkValue = $("#otherSubjectTable").find("input[name='checkRadio']:checked").val();
		$(setDom).val(checkValue);
		$("#modal").modal("hide");
	}
</script>