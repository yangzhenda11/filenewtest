<div class="form-fieldset">
	<div class="form-fieldset-title">
		<div class="fieldset-title">
			<p>线路资费清单</p><span></span>
		</div>
		<div class="form-fieldset-tools">
			<a class="form-collapse"><i class="fa fa-angle-up"></i></a>
		</div>
	</div>
	<div class="form-fieldset-body">
		<div id="lineChargesListContent">
			<div class="portlet">
                <div class="portlet-title ">
                    <div class="caption font-dark contract">
                        <span class="caption-subject bold uppercase">租费</span>
                    </div>
                </div>
                <div class="portlet-body">
                	<div id="wcardTagContent" class="ui-radio-list ui-radio-inline">
            			包含租线业务：
						<label class="ui-radio">
							是
							<input type="radio" value="1" name="wcardTag">
							<span></span>
						</label>
						<label class="ui-radio">
							否
							<input type="radio" value="0" checked="checked" name="wcardTag">
							<span></span>
						</label>
                	</div>
					<div class="tableToobarContent hidden" id="lineChargesListToolbar">
						<button class="btn red" type="button" onclick="addIncomeLinerentTr()"><i class="iconfont icon-add"></i>新增</button>
						<button class="btn red" type="button" onclick="delectsIncomeLinerentTr()"><i class="iconfont icon-shanchu"></i>删除</button>
						<button class="btn red" type="button" onclick="exmportTemplate('wordcard_income_tariff')"><i class="iconfont icon-export"></i>下载模板</button>
						<button class="btn red" type="button" onclick="lineChargestFileImport()"><i class="iconfont icon-import"></i>导入</button>
					</div>
					<div class="table-responsive" id="incomeLinerentTableContent">
						<table class="table table-hover table-bordered table-striped table-align" style="min-width: 1700px;" id="incomeLinerentTable">
							<thead>
								<tr>
									<th class="lineChargesTableEdit"><label class='ui-checkbox'><input type='checkbox' name='incomeLinerentCheckAll' id="incomeLinerentCheckAll"><span></span></label></th>
									<th style="width: 50px;">序号</th>
									<th style="width: 160px;"><i class="iconfont icon-mi required"></i>产品类型</th>
									<th style="width: 180px;"><i class="iconfont icon-mi required"></i>产品名称</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>产品属性</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>范围</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>稽核标签</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>固定月租</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>线路数量</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>合计月租</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>一次性费用</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>其他费用</th>
									<th style="width: 150px;"><i class="iconfont icon-mi required"></i>结算周期</th>
									<th style="width: 50px;" class="lineChargesTableEdit">操作</th>
								</tr>
							</thead>
							<tbody id="incomeLinerentTbody">
								<tr class="emptyTr">
									<td colspan="14">暂无线路资费清单</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	/*
	 * 设置页面的id值，由保存和提交后回调
	 */
	function setPageId_incomeLinerentListId(value){
		var valueKey = 0;
		$.each($("#incomeLinerentTbody tr"), function(k,v) {
			if(!$(v).hasClass("emptyTr")){
				if($(v).data("id") != undefined){
					$(v).data("id",value[valueKey]);
					valueKey++;
				}
			}
		});
	}
	/*
	 * 返回本页面数据，若无返回{}，若不提交本页面的值可删除此方法
	 * isSubmit 提交时为true,判断页面是否要加逻辑上的验证(bootstrap-validator验证除外)
	 */
	function getValue_incomeLinerentList(isSubmit,getValue){
		var incomeLinerentDataList = [];
		var isReg = true;
		$.each($("#incomeLinerentTbody tr"),function(k,v){
			if(!$(v).hasClass("emptyTr")){
				var incomeLinerentDataItem = {};
				incomeLinerentDataItem.wcardId = wcardId;
				incomeLinerentDataItem.contractNumber = contractNumber;
				incomeLinerentDataItem.linerentId = $(v).data("id");
				incomeLinerentDataItem.productKind = $(v).find(".productKind").val();
				incomeLinerentDataItem.productName = $(v).find(".productName").val();
				incomeLinerentDataItem.productAttr = $(v).find(".productAttr").val();
				incomeLinerentDataItem.auditLabel = $(v).find(".auditLabel").val();
				incomeLinerentDataItem.productRange = $(v).find(".productRange").val();
				incomeLinerentDataItem.settlementFrequency = $(v).find(".settlementFrequency").val();
				var fixedMonthRent = $(v).find(".fixedMonthRent").val();
				var lineCount = $(v).find(".lineCount").val();
				var totalMonthRent = $(v).find(".totalMonthRent").val();
				var onceCost = $(v).find(".onceCost").val();
				var otherCost = $(v).find(".otherCost").val();
				if(fixedMonthRent == "" || getValue || retMoney(fixedMonthRent)){
					incomeLinerentDataItem.fixedMonthRent = fixedMonthRent;
				}else{
					isReg = false;
					$(v).find(".fixedMonthRent").parents(".form-group").addClass("has-error").data("errordata","请输入正确的金额");
				};
				if(lineCount == "" || getValue || retInteger(lineCount)){
					incomeLinerentDataItem.lineCount = lineCount;
				}else{
					isReg = false;
					$(v).find(".lineCount").parents(".form-group").addClass("has-error").data("errordata","请输入正确的线路数量(只允许录入整数)");
				};
				if(totalMonthRent == "" || getValue || retMoney(totalMonthRent)){
					incomeLinerentDataItem.totalMonthRent = totalMonthRent;
				}else{
					isReg = false;
					$(v).find(".totalMonthRent").parents(".form-group").addClass("has-error").data("errordata","请输入正确的金额");
				};
				if(onceCost == "" || getValue || retMoney(onceCost)){
					incomeLinerentDataItem.onceCost = onceCost;
				}else{
					isReg = false;
					$(v).find(".onceCost").parents(".form-group").addClass("has-error").data("errordata","请输入正确的金额");
				};
				if(otherCost == "" || getValue || retMoney(otherCost)){
					incomeLinerentDataItem.otherCost = otherCost;
				}else{
					isReg = false;
					$(v).find(".otherCost").parents(".form-group").addClass("has-error").data("errordata","请输入正确的金额");
				};
				incomeLinerentDataList.push(incomeLinerentDataItem);
			}
		});
		if(isReg){
			return incomeLinerentDataList;
		}else{
        	return "noValidator";
		}
	}
	/*
	 * 去除多于的行
	 */
	function removeMorethan_incomeLinerentList(){
		var tableValue = getValue_incomeLinerentList(false,true);
		var emptyList = [];
		for(var i = 0; i < tableValue.length; i++){
			var tableItem = tableValue[i];
			var isEmpty = true;
			delete tableItem.contractNumber;
			delete tableItem.linerentId;
			delete tableItem.wcardId;
			if(tableItem.onceCost == 0){
				delete tableItem.onceCost;
			};
			if(tableItem.otherCost == 0){
				delete tableItem.otherCost;
			};
			$.each(tableItem, function(k,v) {
				if(v){
					isEmpty = false;
					return false;
				}
			});
			if(isEmpty){
				emptyList.push(i);
			}
		};
		$.each(emptyList, function(m,n) {
			var index = n - m;
			$("#incomeLinerentTbody tr").eq(index).remove();
		});
		addIncomeLinerentTableSort();
		App.checkAllFn("#incomeLinerentCheckAll","incomeLinerentCheck");
		addIncomeLinerentTbodyEmptyTr();
	}
	/*
	 * 自定义验证，注意去除.has-error
	 */
	function customValidator_incomeLinerentList(){
		var isReg = true;
		$.each($("#incomeLinerentTbody tr"),function(k,v){
			if(!$(v).hasClass("emptyTr")){
				var productKindItem = $(v).find(".productKind").val();
				var productNameItem = $(v).find(".productName").val();
				var productAttrItem = $(v).find(".productAttr").val();
				var auditLabelItem = $(v).find(".auditLabel").val();
				var auditLabelDisabled = $(v).find(".auditLabel").attr("disabled");
				var productRangeItem = $(v).find(".productRange").val();
				var productRangeDisabled = $(v).find(".productRange").attr("disabled");
				var settlementFrequencyItem = $(v).find(".settlementFrequency").val();
				if(productKindItem == "" || productKindItem == null){
					isReg = false;
					$(v).find(".productKind").parents(".form-group").addClass("has-error");
				};
				if(productNameItem == "" || productNameItem == null){
					isReg = false;
					$(v).find(".productName").parents(".form-group").addClass("has-error");
				};
				if(productAttrItem == "" || productAttrItem == null){
					isReg = false;
					$(v).find(".productAttr").parents(".form-group").addClass("has-error");
				};
				if(auditLabelDisabled == "disabled" || auditLabelDisabled == true){
					$(v).find(".auditLabel").parents(".form-group").removeClass("has-error");
				}else{
					if(auditLabelItem == "" || auditLabelItem == null){
						isReg = false;
						$(v).find(".auditLabel").parents(".form-group").addClass("has-error");
					}
				};
				if(productRangeDisabled == "disabled" || productRangeDisabled == true){
					$(v).find(".productRange").parents(".form-group").removeClass("has-error");
				}else{
					if(productRangeItem == "" || productRangeItem == null){
						isReg = false;
						$(v).find(".productRange").parents(".form-group").addClass("has-error");
					}
				};
				if(settlementFrequencyItem == "" || settlementFrequencyItem == null){
					isReg = false;
					$(v).find(".settlementFrequency").parents(".form-group").addClass("has-error");
				};
			}
		});
		return isReg;
	}
	$("#incomeLinerentTbody").on("change","select",function(){
		$(this).parents(".form-group").removeClass("has-error");
	})
	/*
	 * 验证金额
	 */
	function retMoney(val){
	    var ret = /^[0-9]+(.[0-9]{1,2})?$/;
      	var result = ret.test(val);
      	return result;
	}
	/*
	 * 验证大于0的整数
	 */
	function retInteger(val){
		var ret = /^(0|[1-9][0-9]*)$/;
      	var result = ret.test(val);
      	return result;
	}
	
	//name自增基础值
	var isCreateLinerLen = 0;
	
	//产品类型字典html
	var incomeLinerentType = "";
	//互联网接入服务产品名称字典html
	var incomeLinerentName9070 = "";
	//电路出租名称字典html
	var incomeLinerentName9073 = "";
	//网元出租名称字典html
	var incomeLinerentName9076 = "";
	//产品属性字典html
	var incomeLinerentProp = "";
	//稽核标签字典html
	var incomeLinerentLable = "";
	//结算周期字典html
	var incomeLinerentCycle = "";
	//范围字典html
	var incomeProductRange = "";
	//获取字典select Html;
	getIncomeLinerenDict();
	//获取线路资费信息
	getIncomeLinerenInfo();
	/*
	 * 获取线路资费信息字典值
	 */
	function getIncomeLinerenDict() {
		incomeLinerentType = createIncomeLinerenDictHtml(App.getDictInfo(9060,true));
		incomeLinerentName9070 = createIncomeLinerenDictHtml(App.getDictInfo(9070,true));
		incomeLinerentName9073 = createIncomeLinerenDictHtml(App.getDictInfo(9073,true));
		incomeLinerentName9076 = createIncomeLinerenDictHtml(App.getDictInfo(9076,true));
		incomeLinerentProp = createIncomeLinerenDictHtml(App.getDictInfo(9080,true));
		incomeLinerentLable = createIncomeLinerenDictHtml(App.getDictInfo(9090,true));
		incomeLinerentCycle = createIncomeLinerenDictHtml(App.getDictInfo(9015,true));
		incomeProductRange = createIncomeLinerenDictHtml(App.getDictInfo(9095,true));
	};
	function createIncomeLinerenDictHtml(data){
		var selectHtml = "<option value=''>请选择</option>";
		$.each(data, function(k,v) {
			selectHtml += "<option value='"+ v.dictValue +"'>"+ v.dictLabel +"</option>";
		});
		return selectHtml;
	}
	
	/*
	 * 获取线路资费信息
	 */
	function getIncomeLinerenInfo() {
		var url = serverPath + "contractOrderEditorController/getLinerentId";
		var postData = JSON.stringify({wcardId:wcardId});
		App.formAjaxJson(url, "post", postData, successCallback);

		function successCallback(result) {
			var data = result.data;
			if(data.length > 0){
				addIncomeLinerentTableData(data);
			};
			/*
			 * isEdit 判断页面是否只能查看
			 */
			if(!isEdit){
				$("#lineChargesListContent").find("input").attr("disabled","disabled");
				$("#lineChargesListToolbar,.lineChargesTableEdit").remove();
			}else{
				$("#lineChargesListToolbar").removeClass("hidden");
			};
		}
	}
	//整数验证
	var isInteger = {
		notEmpty : {
			message : "请输入不超过9个字符的整数"
		},
		regexp : {
			regexp : /^(0|[1-9][0-9]*)$/,
			message : '请输入大于等于0的整数'
		}
	};
	//金额验证
	var isMoney = {
		notEmpty : {
			message : "请输入不超过18个字符的数字金额"
		},
		regexp : {
			regexp : /^[0-9]+(.[0-9]{1,2})?$/,
			message : '请输入正确的数字金额'
		}
	}
	/*
	 * 初始化或导入增加处理
	 */
	function addIncomeLinerentTableData(data){
		var isNew = false;
		if($("#incomeLinerentTbody .emptyTr")[0] != undefined){
			isNew = true;
			$("#incomeLinerentTbody .emptyTr").remove();
		};
		var incomeLinerentList=[],incomeLinerentTableHtml = "";
		for(var i = 0; i < data.length; i++){
			var itemData = data[i];
			isCreateLinerLen++;
			var productKind = "productKind" + isCreateLinerLen;
			var productName = "productName" + isCreateLinerLen;
			var productAttr = "productAttr" + isCreateLinerLen;
			var auditLabel = "auditLabel" + isCreateLinerLen;
			var fixedMonthRent = "fixedMonthRent" + isCreateLinerLen;
			var lineCount = "lineCount" + isCreateLinerLen;
			var totalMonthRent = "totalMonthRent" + isCreateLinerLen;
			var onceCost = "onceCost" + isCreateLinerLen;
			var otherCost = "otherCost" + isCreateLinerLen;
			var settlementFrequency = "settlementFrequency" + isCreateLinerLen;
			var productRange = "productRange" + isCreateLinerLen;
			incomeLinerentList.push([productKind,productName,productAttr,auditLabel,fixedMonthRent,lineCount,totalMonthRent,onceCost,otherCost,settlementFrequency,productRange])
			var linerentId = itemData.linerentId ? itemData.linerentId : "100000";
			var fixedMonthRentVal = itemData.fixedMonthRent ? itemData.fixedMonthRent : "";
			var lineCountVal = itemData.lineCount ? itemData.lineCount : "";
			totalMonthRentVal = itemData.totalMonthRent ? itemData.totalMonthRent : "";
			onceCostVal = itemData.onceCost ? itemData.onceCost : "0";
			otherCostVal = itemData.otherCost ? itemData.otherCost : "0";
			incomeLinerentTableHtml += "<tr data-id='"+ linerentId +"' id='"+ productKind +"'>"+
							"<td class='lineChargesTableEdit'><label class='ui-checkbox'><input type='checkbox' name='incomeLinerentCheck'><span></span></label></td>"+
							"<td class='orderNumber'></td>"+
							"<td><div class='form-group'><select class='form-control select2me productKind' data-placeholder='"+setPTip('请选择产品类型')+"' name='"+ productKind +"'>"+ incomeLinerentType +"</select></div></td>"+
							"<td><div class='form-group'><select class='form-control productName' data-placeholder='"+setPTip('请选择产品名称')+"' name='"+ productName +"'></select></div></td>"+
							"<td><div class='form-group'><select class='form-control select2me productAttr' data-placeholder='"+setPTip('请选择产品属性')+"' name='"+ productAttr +"'>"+ incomeLinerentProp +"</select></div></td>"+
							"<td><div class='form-group'><select class='form-control productRange' disabled='disabled' name='"+ productRange +"'></select></div></td>" +
							"<td><div class='form-group'><select class='form-control auditLabel' disabled='disabled' name='"+ auditLabel +"'></select></div></td>" +
							"<td><div class='form-group'><input type='text' class='form-control fixedMonthRent' name='"+ fixedMonthRent +"' placeholder='"+setPTip('请输入固定月租')+"' value='"+fixedMonthRentVal+"' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control lineCount' name='"+ lineCount +"' placeholder='"+setPTip('请输入线路数量')+"' value='"+lineCountVal+"' maxlength='9' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control totalMonthRent' name='"+ totalMonthRent +"' placeholder='"+setPTip('请输入合计月租')+"' value='"+totalMonthRentVal+"' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control onceCost' name='"+ onceCost +"' placeholder='"+setPTip('请输入一次性费用')+"' value='"+onceCostVal+"' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control otherCost' name='"+ otherCost +"' placeholder='"+setPTip('请输入其他费用')+"' value='"+otherCostVal+"' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><select class='form-control select2me settlementFrequency' data-placeholder='"+setPTip('请选择结算周期')+"' name='"+ settlementFrequency +"'>"+ incomeLinerentCycle +"</select></div></td>"+
							"<td class='lineChargesTableEdit'><button type='button' class='btn primary btn-outline btn-xs' onclick='delectIncomeLinerentTr(this)'>删除</button></td>"+
						"</tr>";
		};
		if(isNew){
			$("#incomeLinerentTbody").html(incomeLinerentTableHtml);
		}else{
			$("#incomeLinerentTbody").append(incomeLinerentTableHtml);
		};
		if(!isEdit){
			$("#incomeLinerentTbody").find("select").attr("disabled","disabled");
		}
		App.initFormSelect2("#incomeLinerentTbody");
		for(var o = 0; o < incomeLinerentList.length; o++){
			var itemData = data[o];
			var listData = incomeLinerentList[o];
			$("#"+listData[0]+" select[name='"+listData[0]+"']").val(itemData.productKind).trigger("change");
			$("#"+listData[0]+" select[name='"+listData[1]+"']").val(itemData.productName).trigger("change");
			$("#"+listData[0]+" select[name='"+listData[2]+"']").val(itemData.productAttr).trigger("change");
			if(itemData.productKind == 906010){
				$("#"+listData[0]+" select[name='"+listData[3]+"']").val(itemData.auditLabel).trigger("change");
			}else if(itemData.productKind == 906011){
				$("#"+listData[0]+" select[name='"+listData[10]+"']").val(itemData.productRange).trigger("change");
			};
			$("#"+listData[0]+" select[name='"+listData[9]+"']").val(itemData.settlementFrequency).trigger("change");
			App.addValidatorField("#workOrderContentForm",listData[4],isMoney);
		   	App.addValidatorField("#workOrderContentForm",listData[5],isInteger);
		   	App.addValidatorField("#workOrderContentForm",listData[6],isMoney);
		   	App.addValidatorField("#workOrderContentForm",listData[7],isMoney);
		   	App.addValidatorField("#workOrderContentForm",listData[8],isMoney);
		};
	   	addIncomeLinerentTableSort();
		App.checkAllFn("#incomeLinerentCheckAll","incomeLinerentCheck");
	}
	
	
	/*
	 * 增加单行处理
	 */
	function addIncomeLinerentTr(data){
		if($("#incomeLinerentTbody .emptyTr")[0] != undefined){
			$("#incomeLinerentTbody .emptyTr").remove();
		}
		isCreateLinerLen++;
		var productKind = "productKind" + isCreateLinerLen;
		var productName = "productName" + isCreateLinerLen;
		var productAttr = "productAttr" + isCreateLinerLen;
		var auditLabel = "auditLabel" + isCreateLinerLen;
		var fixedMonthRent = "fixedMonthRent" + isCreateLinerLen;
		var lineCount = "lineCount" + isCreateLinerLen;
		var totalMonthRent = "totalMonthRent" + isCreateLinerLen;
		var onceCost = "onceCost" + isCreateLinerLen;
		var otherCost = "otherCost" + isCreateLinerLen;
		var settlementFrequency = "settlementFrequency" + isCreateLinerLen;
		var productRange = "productRange" + isCreateLinerLen;
		var appendHtml = "<tr data-id='100000' id='"+ productKind +"'>"+
							"<td class='lineChargesTableEdit'><label class='ui-checkbox'><input type='checkbox' name='incomeLinerentCheck'><span></span></label></td>"+
							"<td class='orderNumber'></td>"+
							"<td><div class='form-group'><select class='form-control select2me productKind' data-placeholder='"+setPTip('请选择产品类型')+"' name='"+ productKind +"'>"+ incomeLinerentType +"</select></div></td>"+
							"<td><div class='form-group'><select class='form-control select2me productName' data-placeholder='"+setPTip('请选择产品名称')+"' name='"+ productName +"'></select></div></td>"+
							"<td><div class='form-group'><select class='form-control select2me productAttr' data-placeholder='"+setPTip('请选择产品属性')+"' name='"+ productAttr +"'>"+ incomeLinerentProp +"</select></div></td>"+
							"<td><div class='form-group'><select class='form-control productRange' disabled='disabled' name='"+ productRange +"'></select></div></td>" +
							"<td><div class='form-group'><select class='form-control auditLabel' disabled='disabled' name='"+ auditLabel +"'></select></div></td>" +
							"<td><div class='form-group'><input type='text' class='form-control fixedMonthRent' name='"+ fixedMonthRent +"' placeholder='"+setPTip('请输入固定月租')+"' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control lineCount' name='"+ lineCount +"' placeholder='"+setPTip('请输入线路数量')+"' maxlength='9' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control totalMonthRent' name='"+ totalMonthRent +"' placeholder='"+setPTip('请输入合计月租')+"' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control onceCost' name='"+ onceCost +"' placeholder='"+setPTip('请输入一次性费用')+"' value='0' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><input type='text' class='form-control otherCost' name='"+ otherCost +"' placeholder='"+setPTip('请输入其他费用')+"' value='0' maxlength='18' /></div></td>"+
							"<td><div class='form-group'><select class='form-control select2me settlementFrequency' data-placeholder='"+setPTip('请选择结算周期')+"' name='"+ settlementFrequency +"'>"+ incomeLinerentCycle +"</select></div></td>"+
							"<td class='lineChargesTableEdit'><button type='button' class='btn primary btn-outline btn-xs' onclick='delectIncomeLinerentTr(this)'>删除</button></td>"+
						"</tr>";
		$("#incomeLinerentTbody").append(appendHtml);
		if(!isEdit){
			$("#"+productKind).find("select").attr("disabled","disabled");
		}
		App.initFormSelect2("#"+productKind);
		$("#"+productKind+" .auditLabel").select2({
    		placeholder:"",
            language:'zh-CN',
            width:'100%'
    	});
    	$("#"+productKind+" .productRange").select2({
    		placeholder:"",
            language:'zh-CN',
            width:'100%'
    	});
	   	App.addValidatorField("#workOrderContentForm",lineCount,isInteger);
	   	App.addValidatorField("#workOrderContentForm",fixedMonthRent,isMoney);
	   	App.addValidatorField("#workOrderContentForm",totalMonthRent,isMoney);
	   	App.addValidatorField("#workOrderContentForm",onceCost,isMoney);
	   	App.addValidatorField("#workOrderContentForm",otherCost,isMoney);
	   	addIncomeLinerentTableSort();
		App.checkAllFn("#incomeLinerentCheckAll","incomeLinerentCheck");
	}
	/*
	 * 产品类型联动事件
	 */
	$("#incomeLinerentTbody").on("change",".productKind",function(){
		var productKind = $(this).val();
		var incomeLinerentCont = "";
		var auditLabelCont = "";
		var productRangeCont = "";
		if(productKind == 906010){
			incomeLinerentCont = incomeLinerentName9070;
			auditLabelCont = incomeLinerentLable;
		}else if(productKind == 906011){
			incomeLinerentCont = incomeLinerentName9073;
			productRangeCont = incomeProductRange;
		}else if(productKind == 906012){
			incomeLinerentCont = incomeLinerentName9076;
		};
		var productNameDom = $(this).parents("td").next().find(".productName");
		var auditLabelDom = $(this).parents("td").next().next().next().next().find(".auditLabel");
		var productRangeDom = $(this).parents("td").next().next().next().find(".productRange");
		var productKindName = $(this).attr("name");
		var productName = $(productNameDom).attr("name");
		var auditLabelName = $(auditLabelDom).attr("name");
		var productRangeName = $(productRangeDom).attr("name");
		var bvel = $workOrderContentForm.data("bootstrapValidator").getFieldElements(productKindName);
		productNameDom.html(incomeLinerentCont);
		auditLabelDom.html(auditLabelCont);
		productRangeDom.html(productRangeCont);
        productNameDom.select2({
        	placeholder:"请选择",
            language:'zh-CN',
            width:'100%',
            allowClear:true,
            minimumResultsForSearch: -1
        });
        if(productKind == 906010){
        	if(isEdit){
        		auditLabelDom.removeAttr("disabled");
        	}
        	auditLabelDom.select2({
        		placeholder:setPTip('请选择稽核标签'),
	            language:'zh-CN',
	            width:'100%',
	            allowClear:true,
	            minimumResultsForSearch: -1
        	});
        }else{
        	auditLabelDom.attr("disabled","disabled");
        	auditLabelDom.select2({
        		placeholder:"",
	            language:'zh-CN',
	            width:'100%'
        	});
        };
        if(productKind == 906011){
        	if(isEdit){
        		productRangeDom.removeAttr("disabled");
        	}
        	productRangeDom.select2({
        		placeholder:setPTip('请选择范围'),
	            language:'zh-CN',
	            width:'100%',
	            allowClear:true,
	            minimumResultsForSearch: -1
        	});
        }else{
        	productRangeDom.attr("disabled","disabled");
        	productRangeDom.select2({
        		placeholder:"",
	            language:'zh-CN',
	            width:'100%'
        	});
        };
        if(bvel.prevObject.prevObject){
			$workOrderContentForm.data("bootstrapValidator").updateStatus(productName,"NOT_VALIDATED",null);
			$workOrderContentForm.data("bootstrapValidator").updateStatus(auditLabelName,"NOT_VALIDATED",null);
			$workOrderContentForm.data("bootstrapValidator").updateStatus(productRangeName,"NOT_VALIDATED",null);
		}
	})
	/*
	 * 批量删除表格数据
	 */
	function delectsIncomeLinerentTr(){
		var checkInvoiceLength = $("#incomeLinerentTbody input[name='incomeLinerentCheck']:checked").length;
		if(checkInvoiceLength == 0){
			layer.msg("请勾选要删除的线路资费清单");
		}else{
			layer.confirm("是否要删除这"+checkInvoiceLength+"条数据？",{icon:7,title:"提示"},function(index){
				layer.close(index);
				$.each($("#incomeLinerentTbody input[name='incomeLinerentCheck']:checked"), function(k,v) {
					$(v).parents("tr").remove();
				});
				addIncomeLinerentTableSort();
				App.checkAllFn("#incomeLinerentCheckAll","incomeLinerentCheck");
				addIncomeLinerentTbodyEmptyTr();
			})
		}
	}
	/*
	 * 删除表格数据
	 */
	function delectIncomeLinerentTr(dom){
		layer.confirm("是否要删除此条数据？",{icon:7,title:"提示"},function(index){
			layer.close(index);
			$(dom).parents("tr").remove();
			addIncomeLinerentTableSort();
			App.checkAllFn("#incomeLinerentCheckAll","incomeLinerentCheck");
			addIncomeLinerentTbodyEmptyTr();
		})
	}
	/*
	 * 表格数据增加序号
	 */
	function addIncomeLinerentTableSort(){
		$.each($("#incomeLinerentTbody .orderNumber"), function(k,v) {
			$(v).text(k+1);
		});
	}
	/*
	 * 若为空增加empty值
	 */
	function addIncomeLinerentTbodyEmptyTr(){
		if($("#incomeLinerentTbody tr").length == 0){
			var html = '<tr class="emptyTr"><td colspan="14">暂无线路资费清单</td></tr>';
			$("#incomeLinerentTbody").html(html);
		}
	}
	/*
	 * 线路资费导入
	 */
	function lineChargestFileImport(){
		var setting = {
			title: "线路资费信息导入",
			url: 'contractOrderEditorController/importContractLinerentExcel',
			postfix: ["xlsx","xls"],
			accept: ".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",				//导入文件类型
			extraData: {wcardId:wcardId,contractNumber:contractNumber}
		};
		function callback(result){
			if(result.status == 1){
				var data = result.data;
				if(data.length > 0){
					addIncomeLinerentTableData(data);
				};
				layer.msg("成功导入"+data.length+"条线路资费信息");
				$("#commomModal").modal("hide");
			}else if(result.status == 3010){
				showLayerErrorMsg(result.message);
			}else{
				showLayerErrorMsg(result.message,true);
			}
		}
		App.getFileImportModal(setting,callback);
	}
	/*
	 * 是否租线业务默认事件及切换事件
	 */
	var wcardTagVal = getContractOrderBaseInfoData.wcardTag;
	if(wcardTagVal != null || wcardTagVal != undefined){
		if(wcardTagVal.indexOf("1") != -1){
			$("#wcardTagContent input[name='wcardTag'][value=1]").attr("checked",true);
			setRequiredIcon("add","#customerManagerContent .mangerRequired");
		}
	}
	$("#wcardTagContent input[name='wcardTag']").on("change",function(){
		var checkValue = $(this).val();
		if(checkValue == 1){
			setRequiredIcon("add","#customerManagerContent .mangerRequired");
		}else{
			setRequiredIcon("del","#customerManagerContent .mangerRequired");
		}
	});
	/*
	 * 设置添加获取去除星号
	 * type:add|del
	 * dom:元素dom
	 */
	function setRequiredIcon(type,dom){
		if(type == "add"){
			$(dom).each(function(){
				var addRequiredIconHtml = '<i class="iconfont icon-mi required"></i>' + $(this).text();
				$(this).html(addRequiredIconHtml);
			})
		}else if(type == "del"){
			$(dom).each(function(){
				var addRequiredIconHtml = $(this).text();
				$(this).html(addRequiredIconHtml);
			})
		}
	}
</script>