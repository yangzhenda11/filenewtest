function judge(a){return App.stopLoading("#searchBtn"),resolveResult(a)}function searchStaff(a){var e=$("#staffSearchTable").DataTable();a?e.ajax.reload(null,!1):e.ajax.reload()}function resetPasswd(a,e,t){layer.confirm("确定重置"+e+"的密码为123456吗?",{btn:["重置","取消"],icon:0,skin:"layer-ext-moon"},function(){function r(a){layer.msg("用户"+e+"的密码重置成功，新密码为"+a.data)}App.formAjaxJson(serverPath+"staffs/"+a+"/passwd/"+t,"PUT",null,r)})}function changeStaffStatus(a,e,t,r){function n(){var a="禁用成功";1==t&&(a="启用成功"),layer.msg(a),searchStaff(!0)}1===t?layer.confirm("确认启用"+e+"在"+r+"部门的岗位吗？",{btn:["启用","取消"],icon:0,skin:"layer-ext-moon"},function(){App.formAjaxJson(serverPath+"staffs/"+a+"/status/"+t,"PUT",null,n)}):layer.confirm("确认禁用"+e+"在"+r+"部门的岗位吗？",{btn:["禁用","取消"],icon:0,skin:"layer-ext-moon"},function(){App.formAjaxJson(serverPath+"staffs/"+a+"/status/"+t,"PUT",null,n)})}function showStaffDetail(a){$("#infoModal").load("../staff/staffDetailModal.html",function(){function e(a){function e(a){return a?App.formatDateTime(new Date(a),"yyyy-mm-dd"):""}function t(a){return"1"==a?"有效":"无效"}function r(a){return"F"==a?"女":"男"}App.setFindValue($("#infoDiv"),a.data.staffInfo,{hireDate:e,staffStatus:t,sex:r});var n=a.data.staffOrgs;if(n.length>0)for(p in n){var o=n[p],s='<div class="col-sm-12">                         <div class="form-group">                             <label class="control-label col-sm-2">所属岗位:</label>                             <div class="col-sm-10">                                 <p class="form-control-static">'+o.orgName+"("+orgTypeSet[o.staffOrgType]+")</p>                             </div>                         </div>                     </div>";$("#staffOrgInfos").append(s)}else $("#staffOrgInfos").append('<h5 class="text-center">无岗位数据</h5>');var f=a.data.roles;if(f.length>0)for(p in f){var l=f[p],i='<div class="col-sm-6">                         <div class="form-group">                             <label class="control-label col-sm-4">角色名称:</label>                             <div class="col-sm-8">                                 <p class="form-control-static">'+l.roleName+'</p>                             </div>                         </div>                     </div>                     <div class="col-sm-6">                         <div class="form-group">                             <label class="control-label col-sm-4">所属组织:</label>                             <div class="col-sm-8">                                 <p class="form-control-static">'+l.orgName+"</p>                             </div>                         </div>                     </div>";$("#roleDiv").append(i)}else $("#roleDiv").append('<h5 class="text-center">无角色数据</h5>');var d=a.data.permissions;if(d.length>0){$.fn.zTree.destroy("staffDetailPermtree");{$.fn.zTree.init($("#staffDetailPermtree"),{data:{simpleData:{enable:!0,idKey:"PERM_ID",pIdKey:"PARENT_ID"},key:{name:"PERM_NAME"}}},d)}}else $("#staffDetailPermtree").detach(),$("#permission").append('<h5 class="text-center">无权限数据</h5>')}$("#infoModal").modal({show:!0,backdrop:"static"}),App.formAjaxJson(parent.globalConfig.serverPath+"staffs/"+a,"GET",null,e),$("#infoModal").on("hide.bs.modal",function(){$("#infoModal").empty()})})}function returnStaffList(){$("#staffLoadPart").empty(),$("#staffLoadPart").hide(),$("#divStaffList").show()}function staffOrgRoleManage(a){$("#selectedStaffOrgId").val(a),$("#roleModal").load("staffOrgRole.html",function(){function e(a){for(var e=a.data.havingRoles,t=a.data.notHavingRoles,r=0;r<e.length;r++)$("#havingRoles").append($('<li data-id="'+e[r].ROLE_ID+'" class="list-group-item">'+e[r].ROLE_NAME+"</li>")),$("#notHavingRoles").append($('<li data-id="'+e[r].ROLE_ID+'" class="list-group-item list-group-item-success">'+e[r].ROLE_NAME+"</li>"));for(var r=0;r<t.length;r++)$("#notHavingRoles").append($('<li data-id="'+t[r].ROLE_ID+'" class="list-group-item">'+t[r].ROLE_NAME+"</li>"));selectL2R.init("#selectL2R-ul")}$("#roleModal").modal({show:!0,backdrop:"static"}),App.formAjaxJson(parent.globalConfig.serverPath+"staffs/"+parent.globalConfig.curStaffId+"/staffOrgs/"+parent.globalConfig.curStaffOrgId+"/staffRoles/"+a,"GET",null,e),$("#roleModal").on("hide.bs.modal",function(){$("#roleModal").empty()})})}function saveStaffOrgRoles(){function a(){layer.msg("保存成功!"),$("#roleModal").modal("hide")}var e=selectL2R.getResult("#selectL2R-ul").toString(),t=$("#selectedStaffOrgId").val(),r={roleIds:e,staffOrgId:t,createBy:parent.globalConfig.curStaffId},n=serverPath+"staffs/"+parent.globalConfig.curStaffId+"/staffOrgs/"+t+"/staffRoles?t="+App.timestamp();App.formAjaxJson(n,"PUT",JSON.stringify(r),a)}function changeStaffOrgStatus(a,e,t){function r(){var a="禁用成功";1==t&&(a="启用成功"),layer.msg(a),$("#searchStaffOrgTable").DataTable().ajax.reload(null,!1)}var n={staffOrgId:a,updateBy:parent.globalConfig.curStaffId};"1"===t?layer.confirm("确认启用岗位:"+e+"吗？",{btn:["启用","取消"],icon:0,skin:"layer-ext-moon"},function(){App.formAjaxJson(serverPath+"staffs/"+parent.globalConfig.curStaffId+"/staffOrgStatus/"+t,"PUT",JSON.stringify(n),r)}):layer.confirm("确认禁用岗位:"+e+"吗？",{btn:["禁用","取消"],icon:0,skin:"layer-ext-moon"},function(){App.formAjaxJson(serverPath+"staffs/"+parent.globalConfig.curStaffId+"/staffOrgStatus/"+t,"PUT",JSON.stringify(n),r)})}function addStaffModal(){$("#modal").load("staffInfoModal.html?"+App.timestamp()+" #modalEdit",function(){$("#modalTitle").text("新增人员"),$("#modal").modal("show"),App.initFormSelect2("#staffForm"),$("#passwdNotEpmty").show(),dateRegNameChose(),validate("add")})}function goStaffEdit(a){$("#modal").load("staffInfoModal.html?"+App.timestamp()+" #modalEdit",function(){$("#modalTitle").text("修改人员"),App.initFormSelect2("#staffForm"),$("#modal").modal("show"),getInfor(a),$("#selectedStaffId").val(a)})}function getInfor(a){function e(a){var e=a.data;setEditForm(e),$("#passwd").val("")}App.formAjaxJson(parent.globalConfig.serverPath+"staffs/"+a,"get","",e)}function setEditForm(a){$("#modal").modal("show");var e={hireDate:function(a){return App.formatDateTime(a,"yyyy-mm-dd")}};App.setFormValues("#staffForm",a,e),$("#orgName").attr("title",a.orgName),$("#orgNameIn").data("id",a.orgId),dateRegNameChose(),validate("edit")}function checkLoginNameFun(){function a(a){console.log(a.data),e=null==a.data?!0:!1}var e,t=$("#loginName").val();return""!=t?(App.formAjaxJson(parent.globalConfig.serverPath+"staffs/checkLoginName/"+t,"get","",a,null,null,null,!1),e):void 0}function validate(a){"add"==a?$("#staffForm").bootstrapValidator({live:"enabled",trigger:"live focus blur keyup change",message:"校验未通过",container:"popover",fields:{loginName:{validators:{notEmpty:{message:"请输入账号"},stringLength:{min:0,max:20,message:"请输入不超过20个字符"},regexp:{regexp:/^[a-zA-Z0-9_\-\.]+$/,message:"用户名由数字字母-_和.组成"}}},passwd:{validators:{notEmpty:{message:"请输入密码"},stringLength:{min:5,message:"密码至少5位"}}},staffName:{validators:{notEmpty:{message:"请输入人员姓名"},stringLength:{min:0,max:15,message:"请输入不超过15个字"}}},orgName:{validators:{notEmpty:{message:"请选择所属组织"}},trigger:"focus blur keyup change"},empCode:{validators:{regexp:{regexp:/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,message:"请输入15或18位身份证号"}}},sex:{validators:{notEmpty:{message:"请选择性别"}},trigger:"focus blur keyup change"},postcode:{validators:{regexp:{regexp:/^[0-9]+$/,message:"请检查邮政编码"},stringLength:{min:0,max:6,message:"请输入不超过6位数字"}}},mailAddr:{validators:{stringLength:{min:0,max:30,message:"请输入不超过30个字符"}}},phone:{validators:{regexp:{regexp:/(^(\d{3,4}-)?\d{7,8})$|(1[3|5|7|8]{1}[0-9]{9})/,message:"请检查电话是否正确"}}},mobilPhone:{validators:{notEmpty:{message:"请输入手机号"},stringLength:{min:11,max:11,message:"请输入11位手机号码"},regexp:{regexp:/^1[3|5|7|8]{1}[0-9]{9}$/,message:"请输入正确的手机号码"}}},email:{validators:{emailAddress:{message:"请检查Email拼写"},stringLength:{min:0,max:50,message:"请输入不超过50个字符"}}},staffSort:{validators:{stringLength:{min:0,max:8,message:"请输入不超过8位数字"},regexp:{regexp:/^[0-9]+$/,message:"排序只能输入数字"}}}}}).on("success.form.bv",function(e){e.preventDefault(),updateInnalPersonnel(a)}):$("#staffForm").bootstrapValidator({live:"enabled",trigger:"live focus blur keyup change",message:"校验未通过",container:"popover",fields:{loginName:{validators:{notEmpty:{message:"请输入账号"},stringLength:{min:0,max:20,message:"请输入不超过20个字符"},regexp:{regexp:/^[a-zA-Z0-9_\-\.]+$/,message:"用户名由数字字母-_和.组成"}}},passwd:{validators:{stringLength:{min:5,message:"密码至少5位"}}},staffName:{validators:{notEmpty:{message:"请输入人员姓名"},stringLength:{min:0,max:15,message:"请输入不超过15个字"}}},orgName:{validators:{notEmpty:{message:"请选择所属组织"}},trigger:"focus blur keyup change"},empCode:{validators:{regexp:{regexp:/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,message:"请输入15或18位身份证号"}}},sex:{validators:{notEmpty:{message:"请选择性别"}},trigger:"focus blur keyup change"},postcode:{validators:{regexp:{regexp:/^[0-9]+$/,message:"请检查邮政编码"},stringLength:{min:0,max:6,message:"请输入不超过6位数字"}}},mailAddr:{validators:{stringLength:{min:0,max:30,message:"请输入不超过30个字符"}}},phone:{validators:{regexp:{regexp:/(^(\d{3,4}-)?\d{7,8})$|(1[3|5|7|8]{1}[0-9]{9})/,message:"请检查电话是否正确"}}},mobilPhone:{validators:{notEmpty:{message:"请输入手机号"},stringLength:{min:11,max:11,message:"请输入11位手机号码"},regexp:{regexp:/^1[3|5|7|8]{1}[0-9]{9}$/,message:"请输入正确的手机号码"}}},email:{validators:{emailAddress:{message:"请检查Email拼写"},stringLength:{min:0,max:50,message:"请输入不超过50个字符"}}},staffSort:{validators:{stringLength:{min:0,max:8,message:"请输入不超过8位数字"},regexp:{regexp:/^[0-9]+$/,message:"排序只能输入数字"}}}}}).on("success.form.bv",function(e){e.preventDefault(),updateInnalPersonnel(a)})}function dateRegNameChose(){function a(a){var e=a.data;null==e?layer.msg("没有相关组织和人员信息",{icon:2}):orgNameTree=$.fn.zTree.init($("#orgName"),orgsSetting,e)}$.fn.datepicker&&($.fn.datepicker.defaults.format="yyyy-mm-dd",$.fn.datepicker.defaults.language="zh-CN",$.fn.datepicker.defaults.autoclose=!0,$(".date-picker").datepicker({format:"yyyy-mm-dd"})),$("#orgNameIn").on("click",function(){showTree("orgNameIn")}),App.formAjaxJson(parent.globalConfig.serverPath+"orgs/"+parent.globalConfig.curCompanyId+"/orgTree","get","",a)}function showTree(a){{var e=$("#"+a);e.offset()}$("#"+a+"Content").css({left:"0",top:e.outerHeight()+"px",width:e.outerWidth()+("orgNameIn"==a?40:120)}).slideDown("fast"),onBodyDown(a)}function orgsfilter(a,e,t){var t=t.data;return t?t:null}function onClick(a,e){var t=$.fn.zTree.getZTreeObj(e).getSelectedNodes(),r=t[0].orgName,n=t[0].orgId;$("input[name="+e+"]").data("id",n),$("input[name="+e+"]").val(r),$("input[name="+e+"]").attr("title",r),"orgName"==e&&($("#staffForm").data("bootstrapValidator").updateStatus("orgName","NOT_VALIDATED",null),$("#staffForm").data("bootstrapValidator").validateField("orgName"))}function zTreeBeforeAsync(a,e){return"organisationTree"==a?organisationTree.setting.async.url=parent.globalConfig.serverPath+"orgs/"+e.orgId+"/children":"orgName"==a&&(orgNameTree.setting.async.url=parent.globalConfig.serverPath+"orgs/"+e.orgId+"/children"),!0}function onBodyDown(a){$("body").on("mousedown",function(e){e.target.id==a||e.target.id==a+"Content"||$(e.target).parents("#"+a+"Content").length>0||hideMenu(a)})}function hideMenu(a){$("#"+a+"Content").fadeOut("fast"),$("body").unbind("mousedown",onBodyDown)}function updateInnalPersonnel(a){function e(){layer.msg(n,{icon:1}),searchPersonnel(!1),$("#modal").modal("hide")}function t(){$("#staffForm").data("bootstrapValidator").resetForm()}var r=App.getFormValues($("#staffForm")),n="新增成功",o=parent.globalConfig.serverPath+"staffs/addStaff",s="POST";if("add"==a){if(!checkLoginNameFun())return void layer.alert("此账号已存在！",{icon:0,skin:"layer-ext-moon"});r.createBy=parent.globalConfig.curStaffId,r.updateBy=parent.globalConfig.curStaffId,r.orgId=$("#orgNameIn").data("id"),r.staffKind=1,delete r.staffId}else r.updateBy=parent.globalConfig.curStaffId,r.orgId=$("#orgNameIn").data("id"),n="修改成功",o=parent.globalConfig.serverPath+"staffs/updateStaff",s="PUT";App.formAjaxJson(o,s,JSON.stringify(r),e,t)}function searchPersonnel(a){var e=$("#staffSearchTable").DataTable();a?e.ajax.reload(null,!1):e.ajax.reload()}function getStaffSearch_OrgTree(a){function e(a,e){$("input[name='orgName']",$("#searchStaffForm")).val(e),$("input[name='orgId']",$("#searchStaffForm")).val(a)}selectOrgTree("staffSearch_OrgTree",a,parent.globalConfig.curCompanyId,e,"","1","400","300")}function goAddStaffOrg(a){$("#modal").load("addStaffOrgModal.html?"+App.timestamp()+" #modalAddSO",function(){$("#modalTitle").text("新增岗位"),$("#modal").modal("show"),$("input[name='staffId']",$("#addStaffOrgForm")).val(a),$("#addStaffOrgForm").bootstrapValidator({live:"enabled",trigger:"live focus blur keyup change",message:"校验未通过",container:"popover",fields:{orgName:{validators:{notEmpty:{message:"请选择所属组织"},callback:{message:"在该组织下已有岗位信息",callback:function(a){function e(a){var e=a.data?a.data.staffOrgId:null;t=e?!1:!0}var t=!0;if(""!=a){var r=parent.globalConfig.serverPath+"staffs/staffOrgOrgId",n=$("input[name='staffId']",$("#addStaffOrgForm")).val(),o=$("input[name='staffOrgId']",$("#addStaffOrgForm")).val(),s=$("input[name='orgId']",$("#addStaffOrgForm")).val();App.formAjaxJson(r,"GET",{staffId:n,orgId:s,staffOrgId:o},e,null,null,null,!1)}return t}}}}}}).on("success.form.bv",function(a){a.preventDefault(),addStaffOrg("add")})})}function permissionConfiguration(a){$("#modal").load("permissionConfigurationModal.html?"+App.timestamp()+" #modalPermission",function(){$("#modalTitle").text("数据权限配置"),$("#modalStaffOrgId").val(a),getPermission(a);$("input[name='dataPermType']:checked").val()})}function getPermission(a){function e(a){var e=a.data;e&&e.hasOwnProperty("data_perm_type")&&($("input[name='dataPermType'][value='"+e.data_perm_type+"']").attr("checked","checked"),$("#saveradio2").removeClass("hide"),$("#saveradio1").addClass("hide")),$("#modal").modal("show")}App.formAjaxJson(parent.globalConfig.serverPath+"staffs/staffOrgId"+a,"get","",e)}function savePermission1(){function a(){layer.msg("配置成功!"),$("#modal").modal("hide")}var e=$("input[name='dataPermType']:checked").val(),t=parent.globalConfig.curStaffId,r=parent.globalConfig.curStaffId,n=$("#modalStaffOrgId").val(),o={staffOrgId:n,dataPermType:e,createdBy:t,updatedBy:r},s=parent.globalConfig.serverPath+"staffs/addPermission";App.formAjaxJson(s,"POST",JSON.stringify(o),a)}function savePermission2(){function a(){layer.msg("配置成功!"),$("#modal").modal("hide")}var e=$("input[name='dataPermType']:checked").val(),t=parent.globalConfig.curStaffId,r=$("#modalStaffOrgId").val(),n={staffOrgId:r,dataPermType:e,updatedBy:t},o=parent.globalConfig.serverPath+"staffs/updatePermission";App.formAjaxJson(o,"PUT",JSON.stringify(n),a)}function addStaffOrg_OrgTree(a){function e(a,e){$("input[name='orgName']",$("#addStaffOrgForm")).val(e),$("input[name='orgId']",$("#addStaffOrgForm")).val(a);var a=($("input[name='staffId']",$("#addStaffOrgForm")).val(),$("input[name='staffOrgId']",$("#addStaffOrgForm")).val(),$("input[name='orgId']",$("#addStaffOrgForm")).val());$("#addStaffOrgForm").data("bootstrapValidator").revalidateField("orgName")}selectOrgTree("staffOrgAdd_OrgTree",a,196606,e,"","1","400","300")}function addStaffOrg(a){function e(){layer.msg(n,{icon:1}),searchPersonnel(!0),$("#modal").modal("hide")}function t(){$("#addStaffOrgForm").data("bootstrapValidator").resetForm()}var r=App.getFormValues($("#addStaffOrgForm")),n="新增成功",o=parent.globalConfig.serverPath+"staffs/"+parent.globalConfig.curStaffId+"/staffOrg/",s="POST";"add"==a?(r.createBy=parent.globalConfig.curStaffId,r.updateBy=parent.globalConfig.curStaffId):(r.updateBy=parent.globalConfig.curStaffId,n="修改成功",s="PUT"),App.formAjaxJson(o,s,JSON.stringify(r),e,t)}function goStaffOrgRoleCopy(a){$("#roleCopyFrom").val(a),App.getCommonModal("staff","#","orgName",["staffId","staffOid"])}function goDelStaffOrg(a,e){layer.confirm("确定删除该借调岗位吗？",{btn:["确认","取消"],icon:0,skin:"layer-ext-moon"},function(){function t(){layer.alert("删除成功！",{icon:0}),searchPersonnel(!0)}App.formAjaxJson(serverPath+"staffs/"+a+"/staffOrg/"+e,"DELETE",null,t)})}function goEditStaffOrg(a,e){$("#modal").load("addStaffOrgModal.html?"+App.timestamp()+" #modalAddSO",function(){function t(a){var e=a.data;null==e?layer.msg("没有查到岗位信息",{icon:2}):App.setFormValues("#addStaffOrgForm",e,"")}$("#modalTitle").text("修改岗位"),App.initFormSelect2("#addStaffOrgForm"),$("#modal").modal("show"),$("input[name='staffId']",$("#addStaffOrgForm")).val(a),$("input[name='staffOrgId']",$("#addStaffOrgForm")).val(e),App.formAjaxJson(parent.globalConfig.serverPath+"staffs/"+a+"/staffOrg/"+e,"get","",t),$("#addStaffOrgForm").bootstrapValidator({live:"enabled",trigger:"live focus blur keyup change",message:"校验未通过",container:"popover",fields:{orgName:{validators:{notEmpty:{message:"请选择所属组织"},callback:{message:"该组织下已有其他类型岗位",callback:function(a){function e(a){var e=a.data?a.data.staffOrgId:null;o=e?!1:!0}var t=$("input[name='staffId']",$("#addStaffOrgForm")).val(),r=$("input[name='staffOrgId']",$("#addStaffOrgForm")).val(),n=$("input[name='orgId']",$("#addStaffOrgForm")).val(),o=!0;if(""!=a){var s=parent.globalConfig.serverPath+"staffs/staffOrgOrgId";App.formAjaxJson(s,"GET",{staffId:t,orgId:n,staffOrgId:r},e,null,null,null,!1)}return o}}},trigger:"focus blur keyup change"}}}).on("success.form.bv",function(a){a.preventDefault(),addStaffOrg("edit")})})}var serverPath=parent.globalConfig.serverPath;$(function(){function a(a){e=a.sysConfig.val,1==e&&$("#addBtn").show(),App.initDataTables("#staffSearchTable",{serverSide:!0,ajax:{type:"GET",url:parent.globalConfig.serverPath+"staffs/",data:function(a){a.sysOrgId=parent.globalConfig.curCompanyId,a.staffName=$("input[name='staffName']",$("#searchStaffForm")).val(),a.loginName=$("input[name='loginName']",$("#searchStaffForm")).val();var e=$("input[name='orgId']",$("#searchStaffForm")).val();return null!=e&&""!=e&&(a.sysOrgId=$("input[name='orgId']",$("#searchStaffForm")).val()),a.staffStatus=$("select[name='staffStatus']",$("#searchStaffForm")).val(),a.mobilPhone=$("input[name='mobilPhone']",$("#searchStaffForm")).val(),a.staffKind="1",a.attra=$("select[name='staffOrgType']",$("#searchStaffForm")).val(),a},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",error:function(){App.stopLoading("#searchBtn"),layer.msg("接口错误",{icon:2})},dataSrc:judge},columns:[{data:null,className:"text-center",title:"操作",render:function(a,t,r){if(r){var n=new Array;return 1==e&&("F"==r.STAFF_ORG_TYPE?(n.push({name:"修改",fn:"goStaffEdit('"+r.STAFF_ID+"')"}),n.push({name:"新增岗位",fn:"goAddStaffOrg('"+r.STAFF_ID+"')"})):(n.push({name:"调整",fn:"goEditStaffOrg('"+r.STAFF_ID+"','"+r.STAFF_ORG_ID+"')"}),n.push({name:"删除岗位",fn:"goDelStaffOrg('"+r.STAFF_ID+"','"+r.STAFF_ORG_ID+"')"}))),n.push({name:"密码重置",fn:"resetPasswd('"+r.STAFF_ID+"','"+r.STAFF_NAME+"','"+r.LOGIN_NAME+"')"}),n.push({name:"角色分配",fn:"staffOrgRoleManage('"+r.STAFF_ORG_ID+"','"+r.ORG_NAME+"')"}),n.push({name:"角色复制",fn:"goStaffOrgRoleCopy('"+r.STAFF_ORG_ID+"')"}),n.push({name:"数据权限",fn:"permissionConfiguration('"+r.STAFF_ORG_ID+"')"}),n.push("1"==r.STAFF_ORG_STATUS?{name:"禁用",fn:"changeStaffStatus('"+r.STAFF_ORG_ID+"','"+r.STAFF_NAME+"',0,'"+r.ORG_NAME+"')"}:{name:"启用",fn:"changeStaffStatus('"+r.STAFF_ORG_ID+"','"+r.STAFF_NAME+"',1,'"+r.ORG_NAME+"')"}),App.getDataTableBtn(n)}return""}},{data:null,title:"人员姓名",render:function(a){return'<a href="javascript:void(0)" onclick = "showStaffDetail('+a.STAFF_ID+')">'+a.STAFF_NAME+"</a>"}},{data:"LOGIN_NAME",title:"账号"},{data:"ORG_NAME",title:"部门名称"},{data:"STAFF_ORG_TYPE",title:"岗位类别",className:"text-center",render:function(a,e,t){return"F"==t.STAFF_ORG_TYPE?"主岗":"T"==t.STAFF_ORG_TYPE?"兼岗":"借调"}},{data:"SEX",title:"性别",className:"text-center",render:function(a,e,t){return"M"==t.SEX?"男":"女"}},{data:"EMAIL",title:"邮箱账号"},{data:"MOBIL_PHONE",title:"手机号码"},{data:"STAFF_ORG_STATUS",title:"岗位状态",className:"text-center",render:function(a,e,t){return"1"==t.STAFF_ORG_STATUS?"有效":"无效"}}],columnDefs:[{render:$.fn.dataTable.render.ellipsis(22,!0),targets:"_all",defaultContent:""},{targets:0,render:function(a,e,t){var r=btnFun(t),n=roletemplate(r);return n}}],fixedColumns:{leftColumns:2},scrollX:!0})}var e;App.formAjaxJson(parent.globalConfig.serverPath+"configs/13","GET",null,a)});var orgTypeSet={F:"主岗",T:"兼职",J:"借调"},orgsSetting={async:{enable:!0,url:"",type:"get",dataType:"json",dataFilter:orgsfilter},data:{simpleData:{enable:!0,idKey:"orgId",pIdKey:"parent_id"},key:{name:"orgName"}},view:{dblClickExpand:!1},callback:{onAsyncError:onAsyncError,onClick:onClick,beforeAsync:zTreeBeforeAsync}};