function gerOrgIdByStaffOrgId(){function r(r){null!=r.data?(orgId=r.data.orgId,getOrgTable(orgId)):layer.alert("组织id查询失败",{icon:2})}var a=config.curStaffOrgId;App.formAjaxJson(serverPath+"staffOrgs/"+a+"/Org","get",null,r)}function getOrgTable(r){App.initDataTables("#orgSearchTable","#searchBtn",{ajax:{type:"GET",url:serverPath+"orgs/",data:function(a){return a.orgKind="1",a.orgName=$("#orgName").val(),a.orgCode=$("#orgCode").val(),a.orgType=$("#orgType").val(),a.orgStatus=$("#orgStatus").val(),a.orgId=r,a}},columns:[{data:null,className:"text-center",title:"操作",render:function(r,a,t){if(t){var e=new Array;return e.push("1"==t.ORG_STATUS?{name:"禁用",fn:"orgDel('"+t.ORG_ID+"')"}:{name:"启用",fn:"orgRe('"+t.ORG_ID+"')"}),App.getDataTableBtn(e)}return""}},{data:null,title:"组织名称",render:function(r,a,t){return'<a href="javascript:void(0)" onclick = "orgShowOrgDetail(\''+t.ORG_ID+"')\">"+t.ORG_NAME+"</a>"}},{data:"ORG_CODE",title:"组织编码"},{data:"ORG_TYPE",title:"组织类型",render:function(r){var a="";return 1==r?a="公司":2==r?a="部门":3==r?a="处室":4==r&&(a="虚拟组织"),a}},{data:"ORG_STATUS",title:"状态",render:function(r){return value=1==r?"有效":"无效"}}]})}function orgSearchOrg(r){var a=$("#orgSearchTable").DataTable();r?a.ajax.reload(null,!1):a.ajax.reload()}function orgShowOrgDetail(r){$("#modal").load("_orgModal.html?"+App.timestamp()+" #modalDetail",function(){function a(r){function a(r){var a="";return 1==r?a="公司":2==r?a="部门":3==r?a="处室":4==r&&(a="虚拟组织"),a}App.setFindValue($("#orgDetail"),r.data,{orgStatus:function(r){return"1"==r?"有效":"无效"},orgType:a})}$("#modal").modal("show"),App.formAjaxJson(serverPath+"orgs/"+r,"GET",null,a)})}function orgDel(r){layer.confirm("确定要将其禁用吗",{btn:["禁用","取消"],icon:3,title:"禁用组织"},function(){function a(){layer.msg("禁用成功",{icon:1}),orgSearchOrg(!0)}App.formAjaxJson(serverPath+"orgs/"+r,"DELETE",null,a)})}function orgRe(r){layer.confirm("确定要将其启用吗",{btn:["启用","取消"],icon:3,title:"启用组织"},function(){function a(){layer.msg("启用成功",{icon:1}),orgSearchOrg(!0)}App.formAjaxJson(serverPath+"orgs/"+r+"/orgStatus/?"+App.timestamp(),"PUT",null,a)})}var config=parent.globalConfig,serverPath=config.serverPath;$(function(){gerOrgIdByStaffOrgId()});