function modal_start(e,s,a,t,n,r){$.post(serverPath+"business/startProcess",{processDefinitionKey:e,assignee:s,taskDefinitionKey:a,comment:t,title:$("#taskTitle").val(),businessKey:$("#taskBusinessKey").val(),iscandidate:r,withdraw:n},function(e){layer.alert(e.sign),closeModalForStart()}).error(function(){alert("流程发起异常，请联系管理员！")})}function selectAssigneeForStart(e){alert("业务侧示例，将公共页面“下环节处理人信息”处理完成，本次接受到的环节ID为："+e),$("#assigneeForStart").val(10001),$("#assigneeNameForStart").val("示例：处理人")}function setRelativeData(){return!1}function setFlowKey(){{var e=$("#processDefinitionKeyForStart").val();$("#processDefinitionKey").val()}$("#processDefinitionKey").val(e)}function setProjectPath(){var e=$("#projectPathselect").val();$("#pathSelect").val(e)}function flowStart(){var e=$("#taskBusinessKey").val(),s=$("#taskTitle").val();if(0==e.length)return void layer.msg("请填写业务主键！");if(0==s.length)return void layer.msg("请填写待办标题！");var a={prov:"sd"};setAssigneeParam(a);var t=$("#staffSelectType").val();setStaffSelectType(t),showStartPanel()}function businessPush(){var e=$("#taskBusinessKey").val();if(0==e.length)return void layer.msg("请填写业务主键！");var s=App.getFlowParam(serverPath,e,1,0);App.applyCandidateTask(serverPath,s),modal_passBybuss(s)}function modal_passBybuss(e){var s=serverPath,a=e.taskDefinitionKey,t=e.assignee,n=e.processInstanceId,r=e.taskId,i=e.comment,o=e.handleType,l=e.withdraw,c=e.iscandidate;$.post(s+"business/pushProcess",{processInstanceId:n,taskId:r,taskDefinitionKey:a,assignee:t,comment:i,handleType:o,withdraw:l,nowtaskDefinitionKey:$("#taskDefinitionKey").val(),title:"",iscandidate:c},function(e){layer.msg(e.sign),parent.modal_close()})}function pushReceiveTask(){var e=$("#taskBusinessKey").val(),s=$("#taskTitle").val(),a=$("#receiveStatus").val();if(0==e.length)return void layer.msg("请填写业务主键！");if(0==s.length)return void layer.msg("请填写待办标题！");if(0==a.length)return void layer.msg("请选择后台任务的触发状态！");var t=null;$.ajax({type:"get",url:serverPath+"workflowrest/pushReceiveTask?businessId="+$("#taskBusinessKey").val()+"&taskStatus="+a,dataType:"json",async:!1,contentType:"application/json",success:function(e){var e=e;layer.msg(1==e.success?e.info:e.info)},error:function(e){App.ajaxErrorCallback(e)}}),console.log(t)}function resetStaffSelectType(){var e=$("#staffSelectType").val();setStaffSelectType(e)}function applyCandidateTask(){var e=$("#taskBusinessKey").val();if(0==e.length)return void layer.msg("请填写业务主键！");var s=App.getFlowParam(serverPath,e,1,0);App.applyCandidateTask(serverPath,s)}function modal_applyCandidateTask(e){$.post(serverPath+"business/applyCandidateTask",e,function(e){layer.msg(e.sign),parent.modal_close()})}function startBybussType(){var e=$("#businessType").val();if(0==e.length)return void layer.msg("请填写业务类型，否则无法找到需要启动的流程模板啊！");var s=$("#taskBusinessKey").val();return 0==s.length?void layer.msg("请填写业务主键！"):void $.ajax({type:"get",url:serverPath+"business/startBybussType?businessId="+$("#taskBusinessKey").val()+"&businessType="+e,dataType:"json",async:!1,contentType:"application/json",success:function(e){var e=e;layer.msg(1==e.success?e.info:e.info)},error:function(e){App.ajaxErrorCallback(e)}})}function startFlowAuto(){$.ajax({type:"get",url:serverPath+"workflowrest/startFlowAuto",dataType:"json",async:!1,contentType:"application/json",success:function(e){var e=e;layer.msg(1==e.success?e.msg:e.msg)},error:function(){layer.alert("接口错误",{icon:2,title:"错误"})}})}function checkFlow(){var e=$("#businessTypeNew").val();if(0==e.length)return void layer.msg("请填写需要校验的业务类型，否则无法准确校验是哪个模板！");var s=$("#taskBusinessKey").val();if(0==s.length)return void layer.msg("请填写业务主键，否则无法确定需要校验哪一个业务！");var a=App.checkFlow(serverPath,s,e);if(1==a.success){alert("允许创建工单，工单创建失败的流程实例id为："+a.processInstanceId);var t=App.getFlowParam(serverPath,s,1,0);modal_pushAndStart(t)}else alert(result.info)}function modal_pushAndStart(e){var s=serverPath,a=e.taskDefinitionKey,t=e.assignee,n=e.processInstanceId,r=e.taskId,i=e.comment,o=e.handleType,l=e.withdraw,c=e.iscandidate;$.post(s+"business/pushProcess",{processInstanceId:n,taskId:r,taskDefinitionKey:a,assignee:t,comment:i,handleType:o,withdraw:l,nowtaskDefinitionKey:$("#taskDefinitionKey").val(),title:"",iscandidate:c},function(e){alert(e.sign),startBybussType()})}$(function(){$("#startProcess").load("/html/workflow/startpanel/process-start.html",function(){})});