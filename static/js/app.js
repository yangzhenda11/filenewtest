function isInArray(t,e){var a=","+t.join(",")+",";return-1!=a.indexOf(","+e+",")}function resolveResult(t,e){return 1==t.status?e?t.code:t.data:[]}function onAsyncError(t,e,a,n){-1!=n.responseText.indexOf("会话已经超时")&&null==n.responseJSON?layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login"}):401==n.status?0==top.globalConfig.loginSwitchSuccess?top.window.location.href="/overtime.html":layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login.html"}):layer.alert("接口错误",{icon:2,title:"错误"})}function loadStart(){layerIndex=layer.msg("数据处理中,请稍后...",{icon:16,shade:.01,time:!1})}function loadEnd(){layer.close(layerIndex)}function setDatatableCurPage(t){var e=$(t).val(),a=$(t).parents(".dataTables_wrapper")[0].id;a=a.split("_")[0];var n=App.getDatatablePaging("#"+a),o=Math.ceil(n.total/n.pageLength);/^\+?\d+$/.test(e)&&e>0&&o>=e?(e=Number(e)-1,$("#"+a).DataTable().page(e).draw(!1)):layer.msg("输入页码有误请重新输入"),$(t).val("")}var layerIndex=null,App=function(){var isRTL=!1,isIE8=!1,isIE9=!1,isIE10=!1,resizeHandlers=[],assetsPath="../../",globalImgPath="static/img/",globalPluginsPath="static/plugins/",globalCssPath="static/css/",_getResponsiveBreakpoint=function(t){var e={xs:480,sm:768,md:992,lg:1200};return e[t]?e[t]:0},resBreakpointMd=_getResponsiveBreakpoint("md"),handleInit=function(){"rtl"===$("body").css("direction")&&(isRTL=!0),isIE8=!!navigator.userAgent.match(/MSIE 8.0/),isIE9=!!navigator.userAgent.match(/MSIE 9.0/),isIE10=!!navigator.userAgent.match(/MSIE 10.0/),isIE10&&$("html").addClass("ie10"),(isIE10||isIE9||isIE8)&&$("html").addClass("ie")},_runResizeHandlers=function(){for(var t=0;t<resizeHandlers.length;t++){var e=resizeHandlers[t];e.call()}},handelCheckbox=function(){isIE8&&$("body").on("click",".ui-checkbox-inline span",function(){$(this).siblings("input[type='checkbox']").is(":checked")?$(this).siblings("input[type='checkbox']").removeAttr("checked"):$(this).siblings("input[type='checkbox']").attr("checked","true")})},handelRadio=function(){isIE8&&$("body").on("click",".ui-radio-inline span",function(){$(this).siblings("input[type='radio']").is(":checked")||$(this).siblings("input[type='radio']").attr("checked","true")})},handle100HeightContent=function(){$(".full-height-content").each(function(){var t,e=$(this);if(t=App.getViewPort().height-$(".page-header").outerHeight(!0)-$(".page-footer").outerHeight(!0)-$(".page-title").outerHeight(!0)-$(".page-bar").outerHeight(!0),e.hasClass("portlet")){var a=e.children(".portlet-body");App.destroySlimScroll(a.find(".full-height-content-body")),t=t-e.children(".portlet-title").outerHeight(!0)-parseInt(e.children(".portlet-body").css("padding-top"))-parseInt(e.children(".portlet-body").css("padding-bottom"))-5;var n=e.children(".portlet-footer");n.length>0&&(t-=n.outerHeight(!0)),App.getViewPort().width>=resBreakpointMd&&e.hasClass("full-height-content-scrollable")?(t-=30,a.children(".full-height-content-body").css("height",t),App.initSlimScroll(a.children(".full-height-content-body"))):a.css("min-height",t-20)}else App.destroySlimScroll(e.children(".full-height-content-body")),App.getViewPort().width>=resBreakpointMd&&e.hasClass("full-height-content-scrollable")?(t-=35,e.children(".full-height-content-body").css("height",t),App.initSlimScroll(e.find(".full-height-content-body"))):e.css("min-height",t)})},handleSubpageTab=function(){$(".J_pageItem").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(this),a="";a="A"==e[0].nodeName?e.attr("href"):e.data("href");var n=e.data("title");return""==a||""==n?!1:void window.top.showSubpageTab(a,n)})},handleOnResize=function(){var t,e=$(window).width();if(isIE8){var a;$(window).resize(function(){a!=document.documentElement.clientHeight&&(t&&clearTimeout(t),t=setTimeout(function(){_runResizeHandlers()},50),a=document.documentElement.clientHeight)})}else $(window).resize(function(){$(window).width()!=e&&(e=$(window).width(),t&&clearTimeout(t),t=setTimeout(function(){_runResizeHandlers()},50))})},handlePortletTools=function(){$("body").on("click",".portlet > .portlet-title .remove",function(t){t.preventDefault();var e=$(this).closest(".portlet");$("body").hasClass("page-portlet-fullscreen")&&$("body").removeClass("page-portlet-fullscreen"),e.find(".portlet-title .fullscreen").tooltip("destroy"),e.find(".portlet-title .reload").tooltip("destroy"),e.find(".portlet-title .remove").tooltip("destroy"),e.find(".portlet-title .config").tooltip("destroy"),e.find(".portlet-title .more").tooltip("destroy"),e.find(".portlet-title .collapse, .portlet-title .expand").tooltip("destroy"),e.remove()}),$("body").on("click",".portlet > .portlet-title  .reload",function(t){t.preventDefault();var e=$(this).closest(".portlet").children(".portlet-body"),a=$(this).attr("data-url"),n=$(this).attr("data-error-display");a?(App.blockUI({target:e,animate:!0,overlayColor:"none"}),$.ajax({type:"GET",cache:!1,url:a,dataType:"html",success:function(t){App.unblockUI(e),e.html(t),App.initAjax()},error:function(){App.unblockUI(e);var t="Error on reloading the content. Please check your connection and try again.";"toastr"==n&&toastr?toastr.error(t):"notific8"==n&&$.notific8?($.notific8("zindex",11500),$.notific8(t,{theme:"ruby",life:3e3})):alert(t)}})):(App.blockUI({target:e,animate:!0,overlayColor:"none"}),window.setTimeout(function(){App.unblockUI(e)},1e3))}),$('.portlet .portlet-title a.reload[data-load="true"]').click(),$("body").on("click",".portlet > .portlet-title .collapse, .portlet .portlet-title .expand",function(t){t.preventDefault();var e=$(this).closest(".portlet").children(".portlet-body");$(this).hasClass("collapse")?($(this).removeClass("collapse").addClass("expand"),e.slideUp(200)):($(this).removeClass("expand").addClass("collapse"),e.slideDown(200))})},handleiCheck=function(){$().iCheck&&$(".icheck").each(function(){var t=$(this).attr("data-checkbox")?$(this).attr("data-checkbox"):"icheckbox_minimal-grey",e=$(this).attr("data-radio")?$(this).attr("data-radio"):"iradio_minimal-grey";$(this).iCheck(t.indexOf("_line")>-1||e.indexOf("_line")>-1?{checkboxClass:t,radioClass:e,insert:'<div class="icheck_line-icon"></div>'+$(this).attr("data-label")}:{checkboxClass:t,radioClass:e})})},handleBootstrapSwitch=function(){$().bootstrapSwitch&&$(".make-switch").bootstrapSwitch()},handleBootstrapConfirmation=function(){$().confirmation&&$("[data-toggle=confirmation]").confirmation({btnOkClass:"btn btn-sm btn-success",btnCancelClass:"btn btn-sm btn-danger"})},handleAccordions=function(){$("body").on("shown.bs.collapse",".accordion.scrollable",function(t){App.scrollTo($(t.target))})},handleTabs=function(){if(encodeURI(location.hash)){var t=encodeURI(location.hash.substr(1));$('a[href="#'+t+'"]').parents(".tab-pane:hidden").each(function(){var t=$(this).attr("id");$('a[href="#'+t+'"]').click()}),$('a[href="#'+t+'"]').click()}$().tabdrop&&$(".tabbable-tabdrop .nav-pills, .tabbable-tabdrop .nav-tabs").tabdrop({text:'<i class="fa fa-ellipsis-v"></i>&nbsp;<i class="fa fa-angle-down"></i>'})},handleModals=function(){$("body").on("hide.bs.modal",function(){$(".modal:visible").size()>1&&$("html").hasClass("modal-open")===!1?$("html").addClass("modal-open"):$(".modal:visible").size()<=1&&$("html").removeClass("modal-open")}),$("body").on("show.bs.modal",".modal",function(){$(this).hasClass("modal-scroll")&&$("body").addClass("modal-open-noscroll")}),$("body").on("hidden.bs.modal",".modal",function(){$("body").removeClass("modal-open-noscroll")}),$("body").on("hidden.bs.modal",".modal:not(.modal-cached)",function(){$(this).removeData("bs.modal")})},handleTooltips=function(){$(".tooltips").tooltip(),$(".portlet > .portlet-title .fullscreen").tooltip({trigger:"hover",container:"body",placement:"bottom",title:"全屏浏览"}),$(".portlet > .portlet-title .reload").tooltip({trigger:"hover",placement:"bottom",container:"body",title:"刷新"}),$(".portlet > .portlet-title .remove").tooltip({trigger:"hover",placement:"bottom",container:"body",title:"移除"}),$(".portlet > .portlet-title .config").tooltip({trigger:"hover",placement:"bottom",container:"body",title:"设置"}),$(".portlet > .portlet-title .more").tooltip({trigger:"hover",placement:"bottom",container:"body",title:"查看更多>"}),$(".portlet > .portlet-title .collapse, .portlet > .portlet-title .expand").tooltip({trigger:"hover",placement:"bottom",container:"body",title:"折叠/展开"})},handleDropdowns=function(){$("body").on("click",".dropdown-menu.hold-on-click",function(t){t.stopPropagation()})},handleAlerts=function(){$("body").on("click",'[data-close="alert"]',function(t){$(this).parent(".alert").hide(),$(this).closest(".note").hide(),t.preventDefault()}),$("body").on("click",'[data-close="note"]',function(t){$(this).closest(".note").hide(),t.preventDefault()}),$("body").on("click",'[data-remove="note"]',function(t){$(this).closest(".note").remove(),t.preventDefault()})},handleTextareaAutosize=function(){"function"==typeof autosize&&autosize(document.querySelector("textarea.autosizeme"))},lastPopedPopover,handlePopovers=function(){$(".popovers").popover(),$(document).on("click.bs.popover.data-api",function(){lastPopedPopover&&lastPopedPopover.popover("hide")})},handleScrollers=function(){App.initSlimScroll(".scroller")},handleFancybox=function(){jQuery.fancybox&&$(".fancybox-button").size()>0&&$(".fancybox-button").fancybox({groupAttr:"data-rel",prevEffect:"none",nextEffect:"none",closeBtn:!0,helpers:{title:{type:"inside"}}})},handleCounterup=function(){$().counterUp&&$("[data-counter='counterup']").counterUp({delay:10,time:1e3})},handleFixInputPlaceholderForIE=function(){(isIE8||isIE9)&&$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var t=$(this);""===t.val()&&""!==t.attr("placeholder")&&t.addClass("placeholder").val(t.attr("placeholder")),t.focus(function(){t.val()==t.attr("placeholder")&&t.val("")}),t.blur(function(){(""===t.val()||t.val()==t.attr("placeholder"))&&t.val(t.attr("placeholder"))})})},handleSelect2=function(){$().select2&&($.fn.select2.defaults.set("theme","bootstrap"),$(".select2me").each(function(){var t=$(this).attr("data-allowClear"),e=$(this).attr("data-allowSearch");t="false"!=t?!0:!1,options={placeholder:"全部",language:"zh-CN",width:"100%",allowClear:t},void 0==e&&(options.minimumResultsForSearch=-1),$(this).select2(options)}))},handleDatePicker=function(){$.fn.datepicker&&($.fn.datepicker.defaults.format="yyyy-mm-dd",$.fn.datepicker.defaults.language="zh-CN",$.fn.datepicker.defaults.autoclose=!0,$(".date-picker").datepicker({format:"yyyy-mm-dd"}))},handleDateTimePicker=function(){$.fn.datetimepicker&&($.fn.datetimepicker.defaults.format="yyyy-mm-dd hh:ii:ss",$.fn.datetimepicker.defaults.language="zh-CN",$.fn.datetimepicker.defaults.autoclose=!0,$.fn.datetimepicker.defaults.pickerPosition="bottom-left",$(".datetime-picker").datetimepicker({format:"yyyy-mm-dd hh:ii:ss"}))},panelAction=function(t,e,a,n,o,i){$(t).on("click",function(){var t=$(this),l=t.closest(e),r=l.nextAll(a).first(),s=t.find(".fa");0!=i&&(i=i?i:200),r.slideToggle(i),s.toggleClass(n).toggleClass(o)})},handlePagesearch=function(){$(".page-search-more").length&&panelAction(".page-search-more a",".page-search-more",".page-search-moreBody","fa-angle-double-right","fa-angle-double-up",0)},handleFileInput=function(){$(".form-group-file .input-group").click(function(){var t=$(this).closest(".form-group-file"),e=t.find("input[type=file]");e.trigger("click")}),$(".form-group-file input[type=file]").change(function(){var t=$(this).parent(".form-group-file"),e=t.find(".input-group input[type=text]");e.val($(this).val())})},handleFormFieldset=function(){$(".form-fieldset .form-collapse").length&&panelAction(".form-fieldset .form-collapse",".form-fieldset-title",".form-fieldset-body","fa-angle-up","fa-angle-down")},handleHeight=function(){$("[data-auto-height]").each(function(){var t=$(this),e=$("[data-height]",t),a=0,n=t.attr("data-mode"),o=parseInt(t.attr("data-offset")?t.attr("data-offset"):0);e.each(function(){"height"==$(this).attr("data-height")?$(this).css("height",""):$(this).css("min-height","");var t="base-height"==n?$(this).outerHeight():$(this).outerHeight(!0);t>a&&(a=t)}),a+=o,e.each(function(){"height"==$(this).attr("data-height")?$(this).css("height",a):$(this).css("min-height",a)}),t.attr("data-related")&&$(t.attr("data-related")).css("height",t.height())})};return{init:function(){handelCheckbox(),handelRadio(),handleInit(),handleSubpageTab(),handleScrollers(),handleSelect2(),handleDatePicker(),handlePagesearch(),handleFileInput(),handleFormFieldset(),handlePortletTools(),handleAlerts(),handleDropdowns(),handleTabs(),handleTooltips(),handlePopovers(),handleAccordions(),handleModals(),handleBootstrapConfirmation(),handle100HeightContent(),this.addResizeHandler(handle100HeightContent),handleOnResize()},initAjax:function(){handleScrollers(),handleSelect2(),handleFormFieldset(),handleFileInput(),handleDatePicker(),handleTooltips(),handlePopovers(),handleBootstrapConfirmation()},formAjaxJson:function(t,e,a,n,o,i,l,r,s){var c=function(){},e=e||"get",a=a||"",s=s||"json",d=null==r?!0:r,p=null==l?!0:l,u=null==n||""==n?c:n,h=null==o||""==o?c:o,f=null==i||""==i?c:i;$.ajax({type:e,url:t,data:a,dataType:s,async:d,global:p,contentType:"application/json",success:function(t,e,a){if(200==a.status){var n=t;if(1==n.status)u(n);else{var o=n.message;layer.msg(o),h(n)}}else u("")},error:function(t){-1!=t.responseText.indexOf("会话已经超时")&&null==t.responseJSON?layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login"}):401==t.status?0==top.globalConfig.loginSwitchSuccess?top.window.location.href="/overtime.html":layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login.html"}):layer.alert("接口错误",{icon:2,title:"错误"}),f(t)}})},ajaxErrorCallback:function(t){-1!=t.responseText.indexOf("会话已经超时")&&null==t.responseJSON?layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login"}):401==t.status?0==top.globalConfig.loginSwitchSuccess?top.window.location.href="/overtime.html":layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login.html"}):layer.alert("接口错误",{icon:2,title:"错误"})},startLoading:function(t){$("table").css("width","100%"),$(t).button("loading")},stopLoading:function(t){$(t).button("reset")},isExitsFunction:function(funcName){try{if("function"==typeof eval(funcName))return!0}catch(e){}return!1},getFormValues:function(t){var e={};return t.find(":input:not(.ignore):not(:disabled)").each(function(t,a){var n=a.type,o=$(a).attr("name"),i="";void 0!=o&&("text"==n||"password"==n||"select-one"==n||"textarea"==n||"hidden"==n?(i=$(a).val().trim(),e[o]=i):"checkbox"==n?$(a).is(":checked")&&("undefined"==typeof e[o]&&(e[o]=new Array),e[o].push($(a).val())):"radio"==n&&$(a).is(":checked")&&(i=$(a).val(),e[o]=i))}),e},timestamp:function(){var t=(new Date).getTime();return t="&t="+t},urlEncode:function(t,e,a){if(!t)return"";var n=App.urlEncodeFn(t,e,a);return n=n.replace("&","?")},urlEncodeFn:function(t,e,a){var n="",o=typeof t;if("string"==o||"number"==o||"boolean"==o)n+="&"+e+"="+(null==a||a?t:encodeURIComponent(t));else for(var i in t){var l=null==e?i:e+(t instanceof Array?"["+i+"]":"."+i);n+=App.urlEncodeFn(t[i],l,a)}return n},changeObjKey:function(t,e){for(var a in t)e[t[a]]=null==e.key?"":e.key,delete e[a];return e},initDataTables:function(t,e,a){if($().dataTable){var n=top.globalConfig.curConfigs.config_page_size.split(",");"string"!=typeof arguments[1]&&(a=arguments[1],e=""),a=$.extend(!0,{serverSide:!0,searching:!1,scrollX:!0,scrollCollapse:!0,sScrollX:"100%",sScrollXInner:"100%",bAutoWidth:!0,ordering:!1,oLanguage:{sProcessing:"正在加载数据，请稍候...",sLengthMenu:"&nbsp;&nbsp;&nbsp;&nbsp;每页显示  _MENU_ 条记录",sZeroRecords:"查询不到数据",sInfo:"当前为第 _START_ 至 _END_ 条记录，共 _TOTAL_ 条记录",sInfoEmpty:"当前为第 0 至 0 条记录，共 0 项",sInfoFiltered:"(由 _MAX_ 条记录结果过滤)",sInfoPostFix:"",sSearch:"",sSearchPlaceholder:"输入关键字筛选表格",sUrl:"",sDecimal:"",sThousands:",",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"},buttons:{copy:"<i title='复制到剪切板' class='fa fa-copy'></i>",excel:"<i title='导出表格' class='fa fa-table'></i>",pdf:"<i title='导出PDF' class='fa fa-file-pdf-o'></i>",colvis:"<i title='选择列' class='glyphicon glyphicon-th'></i>",copyTitle:"复制到剪切板",copySuccess:{1:"已经复制当前记录到剪贴板",_:"已经复制 %d 条记录到剪切板"}}},dom:'<"clearfix"<"table_toolbars pull-left"><"pull-right"B>>t<"clearfix dt-footer-wrapper" <"pull-left" <"inline-block"i><"inline-block"l>><"pull-right" p>>',paginationType:"simple_numbers",processing:!0,paging:!0,lengthMenu:n,pageLength:n[0],language:{emptyTable:"没有关联的需求信息!",thousands:","},columnDefs:[{targets:"_all",defaultContent:""}],buttons:[],drawCallback:function(){void 0!=a.drawCallbackFn&&a.drawCallbackFn()},ajax:{beforSend:App.startLoading(e)}},a);var o=$(t).dataTable(a).on("preXhr.dt",function(){App.startLoading(e)}).on("xhr.dt",function(t,a,n,o){App.stopLoading(e),loadEnd(),-1!=o.responseText.indexOf("会话已经超时")&&null==o.responseJSON?layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login"}):200==o.status?1!=o.responseJSON.status&&layer.alert(o.responseJSON.message,{icon:2,title:"错误"}):401==o.status?0==top.globalConfig.loginSwitchSuccess?top.window.location.href="/overtime.html":layer.alert("由于您长时间未操作，为安全起见系统已经自动退出，请重新登录",{icon:2,title:"登录超时",closeBtn:0},function(){top.window.location.href="/login.html"}):layer.alert("接口错误",{icon:2,title:"错误"})});return $.fn.dataTable.ext.errMode="throw",o}},getDatatablePaging:function(t){var e=$(t).dataTable(),a=e.fnSettings(),n={pageStart:a._iDisplayStart,pageLength:a._iDisplayLength,total:a._iRecordsTotal};return n},setFormValues:function(t,e,a){if(void 0!=e&&null!=e){var n=null,o=null,i=null;if($(t).find(".form-control[name]").val(""),void 0!=a&&null!=a)for(var l in a){var r=e[l],s=a[l](r);e[l]=s}for(var c in e)o=":input[name='"+c+"']",n=$(t).find(o),n.length>0?(i=n[0].type,"text"==i||"password"==i||"select-one"==i||"textarea"==i||"hidden"==i?(n.val(e[c]),"select-one"==i&&n.hasClass("select2me")&&n.trigger("change")):("radio"==i||"checkbox"==i)&&App.setChecked(c,e[c])):"object"==typeof e[c]&&App.setFormValues(t,e[c])}},setChecked:function(t,e){if(null!=e)for(var a=document.getElementsByName(t),n=e.toString().split(","),o=0;o<a.length;o++)isInArray(n,a[o].value)&&(a[o].checked=!0)},setFindValue:function(t,e,a){if(void 0!=e&&null!=e){if($(t).find(".form-control-static[name]").text(""),void 0!=a&&null!=a)for(var n in a){var o=e[n],i=a[n](o);e[n]=i}$(t).find(".form-control-static[name]").each(function(t,a){var n=$(a).attr("name"),o=e[n];o?$(a).text(o):$(a).html("&nbsp;")})}},formatDateTime:function(t,e){if(!t)return"";var a=new Date(t),n=a.getFullYear(),o=a.getMonth()+1;o=10>o?"0"+o:o;var i=a.getDate();if(i=10>i?"0"+i:i,"yyyy-MM-dd"==e||"yyyy-mm-dd"==e)return n+"-"+o+"-"+i;var l=a.getHours();l=10>l?"0"+l:l;var r=a.getMinutes(),s=a.getSeconds();return r=10>r?"0"+r:r,s=10>s?"0"+s:s,n+"-"+o+"-"+i+" "+l+":"+r+":"+s},unctionToThousands:function(t){for(var t=(t||0).toString(),e="",a=t.split(".")[1],n=t.split(".")[0];n.length>3;)e=","+n.slice(-3)+e,n=n.slice(0,n.length-3);return n&&(e=n+e),void 0==a?e:e+"."+a},resetForm:function(t){var e=$(t).closest("form");e[0].reset(),e.find(".select2me").trigger("change"),e.find("input[type=text]").each(function(){1==$(this).data("exactSearch")&&$(this).data("exactSearch",!1)})},initFormSelect2:function(t){$().select2&&($.fn.select2.defaults.set("theme","bootstrap"),$(t).find(".select2me").each(function(){var t=$(this).attr("data-allowClear"),e=$(this).attr("data-allowSearch");t="false"!=t?!0:!1,options={placeholder:"请选择",language:"zh-CN",width:"100%",allowClear:t},void 0==e&&(options.minimumResultsForSearch=-1),$(this).select2(options)}))},initAjaxSelect2:function(t,e,a,n,o){function i(e){var o=e.data;$.each(o,function(e,o){$(t).append("<option value='"+o[a]+"'>"+o[n]+"</option>")})}if($().select2){$.fn.select2.defaults.set("theme","bootstrap");var l={placeholder:"请选择",language:"zh-CN",width:"100%"},r=$(t).attr("data-allowClear"),s=$(t).attr("data-allowSearch");if("false"!=r?l.allowClear=!0:r=!1,void 0==s&&(l.minimumResultsForSearch=-1),o&&(l.placeholder=o),$(t).append('<option value="">请选择</option>'),$(t).select2(l),"post"==e.type)var c=JSON.stringify(e.data);else var c=e.data;App.formAjaxJson(e.url,e.type,c,i,null,null,null,e.async)}},checkAllFn:function(t,e){var a=$('input[name="'+e+'"]');$(""+t).prop("checked",!1),$(""+t).off("change").on("change",function(){this.checked?$('input[name="'+e+'"]').prop("checked",!0):$('input[name="'+e+'"]').prop("checked",!1)}),a.off("change").on("change",function(){a.length==$('input[name="'+e+'"]:checked').length?$(""+t).prop("checked",!0):$(""+t).prop("checked",!1)})},getDictInfo:function(t){function e(t){for(var e=t.data,a=0;a<e.length;a++)n[e[a].dictValue]=e[a].dictLabel}var a={dictId:t},n={};return App.formAjaxJson(serverPath+"dicts/listChildrenByDicttId","post",JSON.stringify(a),e,null,null,null,!1),n},getDataTableBtn:function(t){var e='    				{{#each btnArray}}    			<button type="button" class="btn primary btn-outline btn-xs {{this.type}}" onclick="{{this.fn}}">{{this.name}}</button>    			{{/each}}',a=Handlebars.compile(e);return a({btnArray:t})},getDataTableLink:function(t){var e='                    {{#each btnArray}}                <button type="button" title="{{this.name}}" {{#if this.placement}} data-placement="{{this.placement}}" {{else}}data-placement="right"{{/if}} {{#if this.disabled}} disabled="{{this.disabled}}" {{/if}} class="btn btn-link btn-xs" data-delay="100" data-trigger="hover" data-toggle="tooltip"  onclick="{{this.fn}}"><i class="{{this.icon}}"></i></button>                {{/each}}',a=Handlebars.compile(e);return a({btnArray:t})},getDataTableCheckbox:function(t){var e='<label class="ui-checkbox">';return e+='<input type="checkbox" data-id="'+t.id+'"  data-name="'+t.name+'" value="'+t.id+'" name="td-checkbox">',e+="<span></span></label>"},getPresentParm:function(t,e){if(e)var a=top.window.location.href;else var a=window.location.href;if("#"==a[a.length-1]&&(a=a.substring(0,a.length-1)),t)return a;var n=new Object;if(-1!=a.indexOf("?")){var o=a.indexOf("?")+1,i=a.substr(o);strs=i.split("&");for(var l=0;l<strs.length;l++)n[strs[l].split("=")[0]]=unescape(strs[l].split("=")[1])}return n},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null},changePresentUrl:function(t){window.location.href=t},fixToolBars:function(t,e){$(".page-content").scroll(function(){var a=$(".page-content").scrollTop(),n=document.getElementById(t);a>e?$("#"+t).css({position:"fixed",top:"0","z-index":"1000",background:"rgba(255,255,255,0.9)"}):n.style.position="static"})},getCommonModal:function(t,e,a,n,o){"contractType"==t?$("#commomModal").load("../../../static/data/_contractType.html?"+App.timestamp(),function(){initContractTree(e,a,n,o)}):"contractDataSearch"==t?$("#commomModal").load("../../../static/data/_contractDataSearch.html?"+App.timestamp(),function(){initContractDataSearch(e,a,n,o)}):"staff"==t?$("#commomModal").load("../../../static/data/_staff.html?"+App.timestamp(),function(){initStaffTree(e,a,n,o)}):"agentStaff"==t?$("#commomModal").load("../../../static/data/_agentStaff.html?"+App.timestamp(),function(){initAgentStaffTree(e,a,n,o)}):"agentDepartment"==t?$("#commomModal").load("../../../static/data/_agentDepartment.html?"+App.timestamp(),function(){initAgentDepartmentTree(e,a,n,o)}):"ourSubject"==t?$("#commomModal").load("../../../static/data/_ourSubject.html?"+App.timestamp(),function(){initOurSubject(e,a,n,o)}):"otherSubject"==t&&$("#commomModal").load("../../../static/data/_otherSubject.html?"+App.timestamp(),function(){initOtherSubject(e,a,n,o)})},getFileUploadModal:function(t,e){$("#commomModal").load("/static/data/_fileUpload.html?"+App.timestamp(),function(){setParm(t,e)})},getAjaxFileUploadModal:function(t,e){$("#commomModal").load("/static/data/_ajaxFileupload.html?"+App.timestamp(),function(){setParm(t,e)})},getFileImportModal:function(t,e){$("#commomModal").load("/static/data/_fileImport.html?"+App.timestamp(),function(){setParm(t,e)})},addValidatorField:function(t,e,a){$(t).bootstrapValidator("addField",e,{container:"popover",trigger:"live focus blur keyup change",validators:a})},initComponents:function(){this.initAjax()},setLastPopedPopover:function(t){lastPopedPopover=t},addResizeHandler:function(t){resizeHandlers.push(t)},runResizeHandlers:function(){_runResizeHandlers()},scrollTo:function(t,e){var a=t&&t.length>0?t.offset().top:0;t&&($("body").hasClass("page-header-fixed")?a-=$(".page-header").height():$("body").hasClass("page-header-top-fixed")?a-=$(".page-header-top").height():$("body").hasClass("page-header-menu-fixed")&&(a-=$(".page-header-menu").height()),a+=e?e:-1*t.height()),$("html,body").animate({scrollTop:a},"slow")},initSlimScroll:function(t){$().slimScroll&&$(t).each(function(){if(!$(this).attr("data-initialized")){var t;t=$(this).attr("data-height")?$(this).attr("data-height"):$(this).css("height"),$(this).slimScroll({allowPageScroll:!0,size:"7px",color:$(this).attr("data-handle-color")?$(this).attr("data-handle-color"):"#bbb",wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:$(this).attr("data-rail-color")?$(this).attr("data-rail-color"):"#eaeaea",position:isRTL?"left":"right",height:t,alwaysVisible:"1"==$(this).attr("data-always-visible")?!0:!1,railVisible:"1"==$(this).attr("data-rail-visible")?!0:!1,disableFadeOut:!0}),$(this).attr("data-initialized","1")}})},destroySlimScroll:function(t){$().slimScroll&&$(t).each(function(){if("1"===$(this).attr("data-initialized")){$(this).removeAttr("data-initialized"),$(this).removeAttr("style");var t={};$(this).attr("data-handle-color")&&(t["data-handle-color"]=$(this).attr("data-handle-color")),$(this).attr("data-wrapper-class")&&(t["data-wrapper-class"]=$(this).attr("data-wrapper-class")),$(this).attr("data-rail-color")&&(t["data-rail-color"]=$(this).attr("data-rail-color")),$(this).attr("data-always-visible")&&(t["data-always-visible"]=$(this).attr("data-always-visible")),$(this).attr("data-rail-visible")&&(t["data-rail-visible"]=$(this).attr("data-rail-visible")),$(this).slimScroll({wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",destroy:!0});var e=$(this);$.each(t,function(t,a){e.attr(t,a)})}})},scrollTop:function(){App.scrollTo()},blockUI:function(t){t=$.extend(!0,{},t);var e="";if(e=t.animate?'<div class="loading-message '+(t.boxed?"loading-message-boxed":"")+'"><div class="block-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>':t.iconOnly?'<div class="loading-message '+(t.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""></div>':t.textOnly?'<div class="loading-message '+(t.boxed?"loading-message-boxed":"")+'"><span>&nbsp;&nbsp;'+(t.message?t.message:"LOADING...")+"</span></div>":'<div class="loading-message '+(t.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp;'+(t.message?t.message:"LOADING...")+"</span></div>",t.target){var a=$(t.target);a.height()<=$(window).height()&&(t.cenrerY=!0),a.block({message:e,baseZ:t.zIndex?t.zIndex:9e9,centerY:void 0!==t.cenrerY?t.cenrerY:!1,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:t.overlayColor?t.overlayColor:"#555",opacity:t.boxed?.05:.1,cursor:"wait"}})}else $.blockUI({message:e,baseZ:t.zIndex?t.zIndex:9e9,css:{border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:t.overlayColor?t.overlayColor:"#555",opacity:t.boxed?.05:.1,cursor:"wait"}})},unblockUI:function(t){t?$(t).unblock({onUnblock:function(){$(t).css("position",""),$(t).css("zoom","")}}):$.unblockUI()},startPageLoading:function(t){t&&t.animate?($(".page-spinner-bar").remove(),$("body").append('<div class="page-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')):($(".page-loading").remove(),$("body").append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif"/>&nbsp;&nbsp;<span>'+(t&&t.message?t.message:"Loading...")+"</span></div>"))},stopPageLoading:function(){$(".page-loading, .page-spinner-bar").remove()},alert:function(t){t=$.extend(!0,{container:"",place:"append",type:"success",message:"",close:!0,reset:!0,focus:!0,closeInSeconds:0,icon:""},t);var e=App.getUniqueID("App_alert"),a='<div id="'+e+'" class="custom-alerts alert alert-'+t.type+' fade in">'+(t.close?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>':"")+(""!==t.icon?'<i class="fa-lg fa fa-'+t.icon+'"></i>  ':"")+t.message+"</div>";return t.reset&&$(".custom-alerts").remove(),t.container?"append"==t.place?$(t.container).append(a):$(t.container).prepend(a):1===$(".page-fixed-main-content").length?$(".page-fixed-main-content").prepend(a):($("body").hasClass("page-container-bg-solid")||$("body").hasClass("page-content-white"))&&0===$(".page-head").length?$(".page-title").after(a):$(".page-bar").length>0?$(".page-bar").after(a):$(".page-breadcrumb, .breadcrumbs").after(a),t.focus&&App.scrollTo($("#"+e)),t.closeInSeconds>0&&setTimeout(function(){$("#"+e).remove()},1e3*t.closeInSeconds),e},initFancybox:function(){handleFancybox()},getActualVal:function(t){return t=$(t),t.val()===t.attr("placeholder")?"":t.val()},getURLParameter:function(t){var e,a,n=window.location.search.substring(1),o=n.split("&");for(e=0;e<o.length;e++)if(a=o[e].split("="),a[0]==t)return unescape(a[1]);return null},isTouchDevice:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},getViewPort:function(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}},getUniqueID:function(){return"prefix_"+Math.floor(Math.random()*(new Date).getTime())},isIE8:function(){return isIE8},isIE9:function(){return isIE9},isRTL:function(){return isRTL},isAngularJsApp:function(){return"undefined"==typeof angular?!1:!0},getAssetsPath:function(){return assetsPath},setAssetsPath:function(t){assetsPath=t},setGlobalImgPath:function(t){globalImgPath=t},getGlobalImgPath:function(){return assetsPath+globalImgPath},setGlobalPluginsPath:function(t){globalPluginsPath=t},getGlobalPluginsPath:function(){return assetsPath+globalPluginsPath},getGlobalCssPath:function(){return assetsPath+globalCssPath},getResponsiveBreakpoint:function(t){return _getResponsiveBreakpoint(t)},initDefaultEditDataTables:function(t,e){if($().dataTable){var a=function(){};e.drawCallback&&(a=e.drawCallback),e=$.extend(!0,{ordering:!1,scrollX:!0,scrollCollapse:!0,sScrollX:"100%",sScrollXInner:"100%",bAutoWidth:!0,oLanguage:{sProcessing:"正在加载数据，请稍候...",sLengthMenu:"&nbsp;&nbsp;&nbsp;&nbsp;每页显示  _MENU_ 条记录",sZeroRecords:"没有匹配结果",sInfo:"当前为第 _START_ 至 _END_ 条记录，共 _TOTAL_ 条记录",sInfoEmpty:"当前为第 0 至 0 条记录，共 0 项",sInfoFiltered:"(由 _MAX_ 条记录结果过滤)",sInfoPostFix:"",sSearch:"",sSearchPlaceholder:"输入关键字筛选表格",sUrl:"",sDecimal:"",sThousands:",",sEmptyTable:"暂无数据",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"}},dom:'<"clearfix"<"table_toolbars pull-left"><"pull-right"B>>t',processing:!1,paging:!1,language:{emptyTable:"没有关联的需求信息!",thousands:","},columnDefs:[{targets:"_all",defaultContent:""}],buttons:[],drawCallback:function(){$(":checkbox[name='td-checkbox']").prop("checked",!1)
}},e),e.drawCallback=function(){e.toolbars&&($(t+"_wrapper").find(".table_toolbars").html("").append($(e.toolbars).html()),$(e.toolbars).remove()),a()};var n=$(t).dataTable(e);return n}},initEditableDatatables:function(t,e){function a(){for(var t={},a=0;a<e.columns.length;a++){var n=e.columns[a];null!=n.data&&""!=n.data&&(t[n.data]="")}var i=d.fnAddData(t),l=d.fnGetNodes(i[0]);o(d,l),r=l,s=!0}function n(t,e){var a=$(e).find("td:eq(0)"),n='<button class="btn btn-link btn-xs dt-edit" title="编辑">编辑</button>';n+='<button class="btn btn-link btn-xs dt-delete" title="删除">删除</button>',a.html(n);for(var o=t.fnGetData(e),i=$(">td",e),l=i.length,r=1;l>r;r++){var s=$(i[r]).find("select").attr("name");s||(s=$(i[r]).find("input").attr("name")),s&&t.fnUpdate(o[s],e,r,!1)}t.fnDraw()}function o(t,a){var n=$(a).find("td:eq(0)"),o='<button class="btn btn-link btn-xs dt-edit" title="保存">保存</button>';o+='<button class="btn btn-link btn-xs dt-cancel" title="取消">取消</button>',n.html(o);for(var i=t.fnGetData(a),l=$(">td",a).length,r=1;l>r;r++){var s=e.columns[r],c=$(">td:eq("+r+")",a),d=i[s.data];if(s.render){var p=s.render;d=p(d)}var u="text-align: left;";if(s.className&&("text-center"==s.className?u="text-align: center;":"text-right"==s.className&&(u="text-align: right;")),s.isEditable){var h=s.data+r;if(s.isSelectData){var f='<select name="'+s.data+'" class="form-control select2me" data-placeholder="'+s.selectPlaceholder+'" id="'+h+'" value="'+i[s.data]+'" style="width:100%;" ';s.isDisabled&&(f+="disabled "),f+=">",f+='<option value=""></option>';var g=s.isSelectData;for(var m in g)f+=m==i[s.data]?'<option value="'+m+'" selected>'+g[m]+"</option>":'<option value="'+m+'">'+g[m]+"</option>";c.html(f),App.initFormSelect2(c)}else{var b='<input type="text" class="form-control" id="'+h+'" name="'+s.data+'" value="'+d+'" style="width:100%;'+u+'" ';if(s.onclickHandler){var v=s.onclickHandler+"("+h+")";b+='onclick="'+v+'" placeholder="请选择" '}else b+='placeholder="'+s.title+'" ';s.isReadonly&&(b+="readonly "),b+=">",c.html(b)}}else c.html(d);t.fnDraw()}}function i(t,a){var n=t.fnGetData(a),o=n;$("input,select",a).each(function(){var t=$(this).attr("name"),e=$(this).val();o[t]=e});var i=!0;return"function"==typeof e.fnValidEditRow&&(i=e.fnValidEditRow(o)),i}function l(t,a){var n=t.fnGetData(a);$("input,select",a).each(function(){var e=$(this).parent("td").index(),n=$(this).val();t.fnUpdate(n,a,e,!1)});var o='<button class="btn btn-link btn-xs dt-edit" title="编辑">编辑</button>';o+='<button class="btn btn-link btn-xs dt-cancel" title="删除">删除</button>',t.fnUpdate(o,a,0,!1),t.fnDraw(),s&&(s=!1),"function"==typeof e.fnSaveEditRow&&e.fnSaveEditRow(n)}var r=null,s=!1;e.columns.splice(0,0,{data:null,title:"操作",width:"10%",className:"text-center",render:function(){var t='<button class="btn btn-link btn-xs dt-edit" title="编辑">编辑</button>';return t+='<button class="btn btn-link btn-xs dt-delete" title="删除">删除</button>'}}),$(e.addRowBtn).unbind("click").bind("click",function(t){t.preventDefault(),r?layer.alert("尚有编辑行未保存，请您先进行保持或取消！",{icon:0,skin:"layer-ext-moon"}):a()});var c=function(){};e.drawCallback&&(c=e.drawCallback),e.drawCallback=function(){c()},e.serverSide=!1;var d=this.initDefaultEditDataTables(t,e,!0),p=$(t);return p.off("click",".dt-delete"),p.on("click",".dt-delete",function(t){t.preventDefault();var a=this;layer.confirm("您确定要删除此记录吗?",{icon:3,title:"提示"},function(t){$(this).parents("tr").removeClass("clicked");var n=$(a).parents("tr")[0],o=d.fnGetData(n);d.fnDeleteRow(n),layer.close(t),"function"==typeof e.fnDeleteEditRow&&e.fnDeleteEditRow(o)})}),p.off("click",".dt-cancel"),p.on("click",".dt-cancel",function(t){t.preventDefault(),$(this).parents("tr").removeClass("clicked"),s?(d.fnDeleteRow(r),r=null,s=!1):(n(d,r),r=null)}),p.off("click",".dt-edit"),p.on("click",".dt-edit",function(t){t.preventDefault();var e=$(this).parents("tr")[0];if(null!==r&&r!=e)layer.alert("尚有编辑行未保存，请您先进行保持或取消！",{icon:0,skin:"layer-ext-moon"});else if(r==e&&"保存"==$(this).attr("title")){if(!i(d,r))return!1;$(this).parents("tr").removeClass("clicked"),l(d,r),r=null}else $(this).parents("tr").addClass("clicked"),o(d,e),r=e}),d},delTableItem:function(t,e,a){var n=$(t+"_wrapper").find("input[type=checkbox][name=td-checkbox]:checked");if(null==a&&(a="请先在表格中勾选您要删除的项目"),0==n.length)return layer.alert(a,{icon:0,skin:"layer-ext-moon"}),!1;var o=[];$.each(n,function(t,e){o.push(" <span class='text-warning'>"+$(e).attr("data-name")+"</span> ")}),layer.confirm("您选择了【"+o.join(",")+"】共"+n.length+"条记录，确定要将其删除吗？",{btn:["删除","取消"],icon:0,skin:"layer-ext-moon"},function(){e(n)})},getDateTimeStamp:function(t){return Date.parse(t.replace(/-/gi,"/"))},formatStringDate:function(t,e){return new Date(App.getDateTimeStamp(t)).Format(e)},getDateDiff:function(t){var e=6e4,a=60*e,n=24*a,o=30*n,i=(new Date).getTime(),l=i-t;if(!(0>l)){var r=l/o,s=l/(7*n),c=l/n,d=l/a,p=l/e;return result=r>=1?""+parseInt(r)+"月前":s>=1?""+parseInt(s)+"周前":c>=1?""+parseInt(c)+"天前":d>=1?""+parseInt(d)+"小时前":p>=1?""+parseInt(p)+"分钟前":"刚刚"}},initCheckAll:function(){$.each($("[data-checkAll]"),function(){var t=$(this),e=t.attr("value"),a=t.attr("data-fullChecked");a=""==a||"true"==a||1==a?!0:!1;var n=$("[data-checkItem="+e+"]"),o=n.length;$("[data-checkItem="+e+"]:checked").length==o&&t.prop("checked",!0),t.on("click",function(){n.prop("checked",t.is(":checked"))}),n.on("click",function(){$(this).is(":checked")&&!t.is(":checked")?t.prop("checked",a?$("[data-checkItem="+e+"]:checked").length==o?!0:!1:!0):t.prop("checked",a?!1:$("[data-checkItem="+e+"]:checked").length>0?!0:!1)})})},openPageTab:function(t,e){window.top.showSubpageTab(t,e)},closePageTab:function(t){window.top.closeSubpageTab(t)},boxAlert:function(t){t=t?t:{},t=$.extend(!0,{title:"提示",content:"您已成功操作了您的业务",icon:1,closeBtn:0},t),"undefinded"!=typeof t.alertType&&(t.icon=t.alertType),"function"==typeof t.onSuccess&&(t.yes=function(e){t.onSuccess(),layer.close(e)}),layer.open(t)},boxConfirm:function(t){t=t?t:{},layer.confirm(t.content?t.content:"您确定要执行此操作吗?",{icon:3,title:t.title?t.title:"提示"},function(e){"function"==typeof t.onSuccess&&t.onSuccess(),layer.close(e)},function(e){"function"==typeof t.onCancel&&t.onCancel(),layer.close(e)})},getFlowParam:function(t,e,a,n){var o=null;return 0==e.length?layer.msg("业务主键不可为空！"):$.ajax({type:"get",url:t+"workflowrest/getFlowParam?businessId="+e+"&handleType="+a+"&pathSelect="+n,dataType:"json",async:!1,contentType:"application/json",success:function(t){var t=t;1==t.success?o=t.flowdata:layer.msg("获取流程参数异常！")},error:function(t){App.ajaxErrorCallback(t)}}),o},checkFlow:function(t,e,a){var n=null;return 0==a.length?void layer.msg("请填写业务类型，否则无法准确校验是哪个模板！"):0==e.length?void layer.msg("请填写业务主键，否则无法确定需要校验哪一个业务！"):($.ajax({type:"get",url:t+"workflowrest/checkFlow?businessType="+a+"&businessId="+e,dataType:"json",async:!1,contentType:"application/json",success:function(t){n=t},error:function(t){App.ajaxErrorCallback(t)}}),n)},applyCandidateTask:function(t,e){var a=!1;return $.ajax({type:"get",url:t+"workflowrest/applyCandidateTask",data:e,dataType:"json",async:!1,contentType:"application/json",success:function(t){var e=t;a=1==e.success?!0:!1},error:function(t){a=!1,App.ajaxErrorCallback(t)}}),a}}}();jQuery(document).ready(function(){App.init()}),$.ajaxSetup({cache:!1}),$(document).ajaxStart(function(){loadStart()}),$(document).ajaxStop(function(){loadEnd()}),$(document).ajaxError(function(){loadEnd()}),$(document).ajaxSend(function(t,e,a){"GET"==a.type}),String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};