function orgSearchOrg(){var a=$("#curTaborgKind").val();dataTableConfig.ajax.data=function(r){return r.orgKind=$("#curTaborgKind").val(),r.orgName=$("input[name='orgName']",$("#orgSearchForm"+a)).val(),r.orgCode=$("input[name='orgCode']",$("#orgSearchForm"+a)).val(),r.orgType=$("select[name='orgType']",$("#orgSearchForm"+a)).val(),r.orgStatus=$("select[name='orgStatus']",$("#orgSearchForm"+a)).val(),r.orgId=$("#orgCurOrgId").val(),r},searchOrgTable.ajax.reload()}function orgUpdate(a,r,e,t,o,n,l,g){var d=$("#curTaborgKind").val();$("#orgTabOrg"+d).load("../org/orgEdite.html",function(){$("#orgUpdateModle").attr("id","orgUpdateModle"+d),$("#orgUpdateModleTitle").attr("id","orgUpdateModleTitle"+d),$("#orgUpdateForm").attr("id","orgUpdateForm"+d),$("#orgUpdateSaveBtn").attr("id","orgUpdateSaveBtn"+d),"1"==d?$("#orgUpdateModleTitle"+d).html("修改联通组织"):"2"==d&&$("#orgUpdateModleTitle"+d).html("修改乙方组织"),resetValidator(),null==$("#orgUpdateForm"+d).data("bootstrapValidator")&&$("#orgUpdateForm"+d).bootstrapValidator(orgUpdateCheckValidator),$("input[name='orgId']",$("#orgUpdateForm"+d)).val(a),$("input[name='orgName']",$("#orgUpdateForm"+d)).val(r),$("input[name='orgCode']",$("#orgUpdateForm"+d)).val(e),$("input[name='parentCode']",$("#orgUpdateForm"+d)).val(n),$("input[name='parentId']",$("#orgUpdateForm"+d)).val(l),$("input[name='parentName']",$("#orgUpdateForm"+d)).val(g),$("select[name='orgType'] option[value='"+t+"']").attr("selected",!0),$("#orgUpdateModle"+d).removeClass("HdClass")})}function orgDel(a){if(confirm("确定要禁用组织吗")){var r=$("#curTaborgKind").val();$.ajax({type:"DELETE",url:serverPath+"orgs/"+a,contentType:"application/json",success:function(a){alert("组织禁用"+a.message),loadOrgKindTab(r)},error:function(){alert("组织禁用失败")}})}}function orgRe(a){if(confirm("确定要启用此组织吗")){var r=$("#curTaborgKind").val();$.ajax({type:"PUT",url:serverPath+"orgs/"+a+"/orgStatus",contentType:"application/json",success:function(a){a.data>0&&(alert("组织启用"+a.message),loadOrgKindTab(r))},error:function(){alert("组织启用失败")}})}}function orgShowOrgDetail(a){var r=$("#curTaborgKind").val();$("#orgDetailModalPart"+r).load("../org/orgDetailModal.html",function(){var r=$("#curTaborgKind").val();$("#orgDetailInfoModal").attr("id","orgDetailInfoModal"+r),$("#orgModalDetail").attr("id","orgModalDetail"+r),$("#orgDetailModal_orgId").attr("id","orgDetailModal_orgId"+r),$("#orgDetailModal_orgId"+r).val(a)})}var searchOrgTable,btnModel='    	{{#each func}}    <button type="button" title="{{this.title}}" class="{{this.type}} btn-sm" onclick="{{this.fn}}">{{this.name}}</button>    {{/each}}',template=Handlebars.compile(btnModel),dataTableConfig={ordering:!1,serverSide:!0,paging:!0,searching:!1,scrollX:!0,autoWidth:!1,destroy:!0,dom:'rt<"floatl mt5"l><"floatl mt4"i><"floatr mt5"p><"clear">',ajax:{type:"GET",url:parent.globalConfig.serverPath+"orgs/",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json"},columns:[{data:null,className:"text-center",render:function(a,r,e){var t;t="1"==e.ORG_STATUS?{func:[{name:"修改",fn:"orgUpdate('"+e.ORG_ID+"','"+e.ORG_NAME+"','"+e.ORG_CODE+"','"+e.ORG_TYPE+"','"+e.ORG_STATUS+"','"+e.PARENT_CODE+"','"+e.PARENT_ID+"','"+e.PARENT_NAME+"')",type:"user-button",title:"hhahahahahahaah"},{name:"禁用",fn:"orgDel('"+e.ORG_ID+"')",type:"user-button user-btn-n"}]}:{func:[{name:"修改",fn:"orgUpdate('"+e.ORG_ID+"','"+e.ORG_NAME+"','"+e.ORG_CODE+"','"+e.ORG_TYPE+"','"+e.ORG_STATUS+"','"+e.PARENT_CODE+"','"+e.PARENT_ID+"','"+e.PARENT_NAME+"')",type:"user-button",title:"hhahahahahahaah"},{name:"启用",fn:"orgRe('"+e.ORG_ID+"')",type:"user-button user-btn-n"}]};var o=template(t);return o}},{data:"ORG_NAME",className:"text-center",render:function(a,r,e){return"<a href=\"javascript:orgShowOrgDetail('"+e.ORG_ID+"')\">"+a+"</a>"}},{data:"ORG_CODE",className:"text-center"},{data:"ORG_TYPE",className:"text-center",render:function(a){var r;return 1==a?r="公司":2==a?r="部门":3==a?r="处室":4==a&&(r="虚拟组织"),r}},{data:"ORG_STATUS",className:"text-center",render:function(a){var r;return 1==a?r="有效":0==a&&(r="无效"),r}}],columnDefs:[{render:$.fn.dataTable.render.ellipsis(22,!0),targets:"_all",defaultContent:""}]};$(function(){var a=$("#curTaborgKind").val();$("#OrgSearchTable").attr("id","OrgSearchTable"+a),dataTableConfig.ajax.data=function(r){return r.orgKind=$("#curTaborgKind").val(),r.orgName=$("input[name='orgName']",$("#orgSearchForm"+a)).val(),r.orgCode=$("input[name='orgCode']",$("#orgSearchForm"+a)).val(),r.orgType=$("select[name='orgType']",$("#orgSearchForm"+a)).val(),r.orgStatus=$("select[name='orgStatus']",$("#orgSearchForm"+a)).val(),r.orgId=$("#orgCurOrgId").val(),r},$("#OrgSearchTable"+a).dataTable().fnDestroy(),searchOrgTable=$("#OrgSearchTable"+a).DataTable(dataTableConfig)});