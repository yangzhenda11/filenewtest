<div class="form-fieldset">
	<div class="form-fieldset-title">
		<div class="fieldset-title">
			<p>约定收款信息</p><span></span>
		</div>
		<div class="form-fieldset-tools">
			<a class="form-collapse"><i class="fa fa-angle-up"></i></a>
		</div>
	</div>
	<div class="form-fieldset-body">
		<div class="row defaultFieldsetForm" id="appointReceiptForm">
			<input type="hidden" name="payId" id="appointReceiptPayId" value="100000" />
			<div class="col-sm-6 form-group">
				<label for="payType" class="control-label">支付方式：</label>
				<div class="valiParent">
					<select id="appointPayType" name="payType" class="form-control"></select>
				</div>
			</div>
			<div class="col-sm-3 form-group appointTypeOtherContent">
				<input type="text" class="form-control hidden" id="appointReceiptTypeOther" name="typeOther" maxlength="200" />
			</div>
			<div class="col-sm-6 form-group">
				<label for="payFrequency" class="control-label">约定收款期限：</label>
				<div class="valiParent">
					<input type="text" class="form-control" id="payFrequency" name="payFrequency" maxlength="2000" />
				</div>
			</div>
			<div class="col-sm-6 form-group">
				<label for="payCondition" class="control-label">租费结算条件：</label>
				<div class="valiParent">
					<input type="text" class="form-control" id="payCondition" name="payCondition" maxlength="2000" />
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	/*
	 * 设置页面的id值，由保存和提交后回调
	 */
	function setPageId_incomePayId(value){
		$("#appointReceiptPayId").val(value);
	}
	/*
	 * 返回本页面数据，若无返回{}，若不提交本页面的值可删除此方法
	 * isSubmit 提交时为true,判断页面是否要加逻辑上的验证(bootstrap-validator验证除外)
	 */
	function getValue_incomePay(isSubmit){
		var incomePaData = App.getFormValues($("#appointReceiptForm"));
		incomePaData.wcardId = wcardId;
		incomePaData.contractNumber = contractNumber;
		if(incomePaData.payType != "903540"){
			incomePaData.typeOther = "";
		}
		return incomePaData;
	}
	/*
	 * isEdit 判断页面是否只能查看
	 */
	if(!isEdit){
		$("#appointReceiptForm").find("input,select").attr("disabled","disabled");
	};
	appointPayTypeDictHtml();
	function appointPayTypeDictHtml(){
		var appointPayTypeDict = App.getDictInfo(9035,true);
		var selectHtml = "<option value=''>请选择</option>";
		$.each(appointPayTypeDict, function(k,v) {
			selectHtml += "<option value='"+ v.dictValue +"'>"+ v.dictLabel +"</option>";
		});
		var options = {
            placeholder:"请选择支付方式",
            language:'zh-CN',
            width:'100%',
            allowClear: true,
            minimumResultsForSearch: -1
       	};
       	$("#appointPayType").html(selectHtml);
        $("#appointPayType").select2(options);
        $("#appointPayType").val("903520").trigger("change");
	}
	//获取约定收款信息
	getAppointReceiptInfo();
	/*
	 * 获取约定收款信息
	 */
	function getAppointReceiptInfo() {
		var postData = JSON.stringify({wcardId:wcardId});
		var url = serverPath + "contractOrderEditorController/getIncomePayId";
		App.formAjaxJson(url, "post", postData, successCallback);
		function successCallback(result) {
			var data = result.data;
			if(data){
				$("#appointPayType").val(data.payType).trigger('change');
				$("#appointReceiptTypeOther").val(data.typeOther);
				$("#payFrequency").val(data.payFrequency);
				$("#payCondition").val(data.payCondition);
                $("#appointReceiptPayId").val(data.payId);
			}
		}
	}
	$("#appointPayType").on("change",function(){
		var value = $(this).val();
		if(value == 903540){
			$('#appointReceiptTypeOther').removeClass("hidden");
		}else{
			$("#appointReceiptTypeOther").val("");
			$('#appointReceiptTypeOther').addClass("hidden");
		}
	})
</script>