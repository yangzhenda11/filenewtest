!function(e){"use strict";e.fn.treegridData=function(t,a){if("string"==typeof t)return e.fn.treegridData.methods[t](this,a);t=e.extend({},e.fn.treegridData.defaults,t||{});var d=e(this);d.getRootNodes=function(a){var d=[];return e.each(a,function(e,a){a[t.parentColumn]||d.push(a)}),d};var n=0;if(d.getTd=function(t,a){var d=e("<td></td>"),n=t[a.field];return a.render&&(n=a.render(t[a.field],t),void 0==n&&(n=t[a.field])),d.html(n),a.width&&d.attr("width",a.width),a.align&&d.css({"text-align":a.align}),d},d.getChildNodes=function(a,r,i,l){e.each(a,function(s,o){if(o[t.parentColumn]==r[t.id]){var p=e("<tr></tr>"),u=i+n++ +1;p.addClass("treegrid-"+u),p.addClass("treegrid-parent-"+i),e.each(t.columns,function(e,t){p.append(d.getTd(o,t))}),l.append(p),d.getChildNodes(a,o,u,l)}})},d.initHeader=function(){var a=e("<tr></tr>");e.each(t.columns,function(t,d){var n=e("<th></th>");d.width&&n.attr("width",d.width),d.align&&n.css("text-align",d.align),n.text(d.title),a.append(n)});var n=e("<thead></thead>");n.append(a),d.append(n)},d.initBody=function(a){var r=e("<tbody></tbody>"),i=d.getRootNodes(a);e.each(i,function(i,l){var s=++n,o=e("<tr></tr>");o.addClass("treegrid-"+s),e.each(t.columns,function(e,t){o.append(d.getTd(l,t))}),r.append(o),d.getChildNodes(a,l,s,r)}),d.append(r)},d.initTreeTable=function(){d.treegrid({treeColumn:t.treeColumn?t.treeColumn:0,expanderExpandedClass:t.expanderExpandedClass,expanderCollapsedClass:t.expanderCollapsedClass,initialState:t.expandAll?"expanded":"collapsed",saveState:t.saveState?t.saveState:!1,saveStateName:t.saveStateName?t.saveStateName:"tree-grid-state"})},d.initTable=function(e){d.html(""),d.initHeader(),d.initBody(e),d.initTreeTable()},d.hasClass("table")||d.addClass("table"),t.striped&&(d.hasClass("table-striped")||d.addClass("table-striped")),t.bordered&&(d.hasClass("table-bordered")||d.addClass("table-bordered")),t.url)e.ajax({type:t.type,url:t.url,data:t.ajaxParams,dataType:"JSON",success:function(e){d.initTable(e)}});else{if(!t.data)return;d.initTable(t.data)}return d.reload=function(){if(t.url)e.ajax({type:t.type,url:t.url,data:t.ajaxParams,dataType:"JSON",success:function(e){d.initBody(e),d.initTreeTable()}});else{if(!t.data)return;d.initBody(data),d.initTreeTable()}},d},e.fn.treegridData.methods={getAllNodes:function(e){return e.treegrid("getAllNodes")}},e.fn.treegridData.defaults={id:"id",parentColumn:"parentId",data:[],type:"GET",url:null,ajaxParams:{},treeColumn:0,expandAll:!0,striped:!1,bordered:!1,columns:[],expanderExpandedClass:"glyphicon glyphicon-chevron-down",expanderCollapsedClass:"glyphicon glyphicon-chevron-right"}}(jQuery);