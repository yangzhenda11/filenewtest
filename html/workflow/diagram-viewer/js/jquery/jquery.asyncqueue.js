!function(t){t.AsyncQueue=function(){var t,n,e,u,r,a=this,s=[],l=!1,f=0,o=10;return u=function(){var t=s.shift();t&&(f++,setTimeout(function(){t.fn.apply(a,[a]),t.isParallel||l===!1&&u(),f--,0==f&&0==s.length&&r()},t.timeOut),t.isParallel&&l===!1&&u())},r=function(){t&&t.apply(a,[a])},this.onComplete=function(n){t=n},this.onFailure=function(t){n=t},this.add=function(t){var n=arguments[0];if(n&&"[object Array]"===Object.prototype.toString.call(n)){var i=arguments[1],e="undefined"!=typeof arguments[2]?arguments[2]:o;if("function"==typeof i)for(var u=0;u<n.length;u++){(function(t){s.push({isParallel:!0,fn:function(){i.apply(a,[a,t])},timeOut:e})})(n[u])}}else{var i=arguments[0],e="undefined"!=typeof arguments[1]?arguments[2]:o;s.push({isParallel:!1,fn:t,timeOut:e})}return this},this.addParallel=function(t,n){return s.push({isParallel:!0,fn:t,timeOut:n}),this},this.storeData=function(t){return e=t,this},this.lastCallbackData=function(){return e},this.run=function(){l=!1,u()},this.pause=function(){return l=!0,this},this.failure=function(){if(l=!0,n){var t=[a];for(i=0;i<arguments.length;i++)t.push(arguments[i]);n.apply(a,t)}},this.size=function(){return s.length},this}}(jQuery);