<div class="form-fieldset">
	<div class="form-fieldset-title">
		<span><i class="iconfont icon-layers"></i> 合同扫描件列表</span>
		<div class="form-fieldset-tools">
			<a href="#" class="form-collapse"><i class="fa fa-angle-up"></i></a>
		</div>
	</div>
	<div class="form-fieldset-body">
		<div class="row">
			<div class="portlet">
                <div class="portlet-title ">
                    <div class="caption font-dark">
                        <span class="caption-subject bold uppercase">合同正文扫描件</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <table class='table table-hover table-bordered table-striped table-align'>
						<thead>
							<tr>
								<th>序号</th>
								<th>文件列表</th>
								<th>上传日期</th>
								<th>上传人</th>
							</tr>
						</thead>
						<tbody id="contractMainTextTbody"></tbody>
					</table>
            	</div>
       	    </div>
       	    <div class="portlet">
                <div class="portlet-title ">
                    <div class="caption font-dark">
                        <span class="caption-subject bold uppercase">合同附件扫描件</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <table class='table table-hover table-bordered table-striped table-align'>
						<thead>
							<tr>
								<th>序号</th>
								<th>文件列表</th>
								<th>上传日期</th>
								<th>上传人</th>
							</tr>
						</thead>
						<tbody id="contractAppendixTbody"></tbody>
					</table>
            	</div>
       	    </div>
		</div>
	</div>
</div>
<script type="text/javascript">
	//获取合同正文扫描件
	getContarctScanCopyContractText();
	//获取合同附件扫描件
	getContarctScanCopyContractAttachment();
	/*
	 * 获取合同正文扫描件
	 */
	function getContarctScanCopyContractText(){
		var url = serverPath + 'contractScanQuery/listContractText?id=' + contractId;
		App.formAjaxJson(url, "post", null, successCallback);
		function successCallback(result) {
			var data = result.data;
			var html = "";
			if(data.length > 0){
				for(var i = 0; i < data.length; i++){
					html += "<tr>"+
							"<td>"+ (i+1) +"</td>"+
							"<td><a href='/contractUpload/downloadS3?key1="+data[i].storeIdDisplay+"'>"+ data[i].displayName+"</td>"+
							"<td>"+ App.formatDateTime(data[i].ctreatedDate) +"</td>"+
							"<td>"+ data[i].createdByName +"</td>";
				}
			}else{
				html = '<tr><td colspan="4">暂无合同正文扫描件信息</td></tr>'
			};
			$("#contractMainTextTbody").html(html);
		}
	}
	/*
	 * 获取合同附件扫描件
	 */
	function getContarctScanCopyContractAttachment(){
		var url = serverPath + 'contractScanQuery/listContractAttachment?id=' + contractId;
		App.formAjaxJson(url, "post", null, successCallback);
		function successCallback(result) {
			var data = result.data;
			var html = "";
			if(data.length > 0){
				for(var i = 0; i < data.length; i++){
					html += "<tr>"+
							"<td>"+ (i+1) +"</td>"+
							"<td><a href='/contractUpload/downloadS3?key1="+data[i].storeIdDisplay+"'>"+ data[i].displayName+"</td>"+
							"<td>"+ App.formatDateTime(data[i].ctreatedDate) +"</td>"+
							"<td>"+ data[i].createdByName +"</td>";
				}
			}else{
				html = '<tr><td colspan="4">暂无合同附件扫描件信息</td></tr>'
			};
			$("#contractAppendixTbody").html(html);
		}
	}	
</script>