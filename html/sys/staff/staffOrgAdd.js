function saveStaffOrg(){var a=$("#curTabstaffKind").val();if(""==$("input[name='orgId']","#staffOrgAddForm"+a).val())alert("请选择组织");else{var t=$("#selectedStaffId"+a).val(),r=$("#staffOrgAddForm"+a).serializeArray(),e={};$.each(r,function(a,t){e[t.name]=t.value}),$.ajax({type:"POST",url:serverPath+"staffs/"+t+"/staffOrg",contentType:"application/json",data:JSON.stringify(e),success:function(){returnStaffOrgList(),alert("添加成功！")},error:function(){alert("添加失败o_o请重试...")}})}}function getStaffOrgAdd_OrgTree(a){selectOrgTree("staffOrgAdd_OrgTree",a,curOrgId,getStaffOrgAdd_OrgTreeId,"","1","","")}function getStaffOrgAdd_OrgTreeId(a,t){$("input[name='orgName']",$("#staffOrgAddForm"+curTabstaffKind)).val(t),$("input[name='orgId']",$("#staffOrgAddForm"+curTabstaffKind)).val(a),curAddStaffOrgOrgVal!=a&&addCheckSameOrg()}function addCheckSameOrg(){var a=$("#selectedStaffId"+curTabstaffKind).val(),t=$("input[name='orgId']","#staffOrgAddForm"+curTabstaffKind).val();curAddStaffOrgOrgVal=t,""!=t&&$.get(serverPath+"staffs/staffOrgOrgId",{staffId:a,orgId:t},function(a){""==a?$("#staffOrgAddForm"+curTabstaffKind).data("bootstrapValidator").updateStatus("orgName","VALID"):$("#staffOrgAddForm"+curTabstaffKind).data("bootstrapValidator").updateStatus("orgName","INVALID","orgIdCheck")})}var staffOrgAddValidator={message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{orgName:{validators:{notEmpty:{message:"请点击选择组织"},orgIdCheck:{message:"此组织已存在岗位"}}},hireDate:{validators:{notEmpty:{message:"请点击选择入职日期"}}},duty:{validators:{stringLength:{min:0,max:100,message:"请输入不超过100个字符"}}}},submitHandler:function(){saveStaffOrg()}};!function(a){a.fn.bootstrapValidator.validators.orgIdCheck={html5Attributes:{message:"message",field:"field"},validate:function(){return!0}}}(window.jQuery);var curAddStaffOrgOrgVal;$(function(){var a=$("#curTabstaffKind").val();curAddStaffOrgOrgVal=$("#staffOrgAddForm input[name='orgId']").val(),$("input[name='hireDate']","#staffOrgAddForm").blur(function(){var t=$("input[name='hireDate']","#staffOrgAddForm"+a).val();""==t?$("#staffOrgAddForm"+a).data("bootstrapValidator").updateStatus("hireDate","INVALID"):$("#staffOrgAddForm"+a).data("bootstrapValidator").updateStatus("hireDate","VALID")})});