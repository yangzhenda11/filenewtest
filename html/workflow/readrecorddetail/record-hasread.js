function loadTaskPath(a,t,e,r,o){$.post(a+"/flowReadRecord/findRecordPath/"+t+"/"+e+"/"+r,function(t){var e=t.retCode;if(1==e){var s=a+"/"+t.dataRows[0].url;$("#paramHasread").val(s.substring(s.indexOf("?")+1)),$("#businessHasread").load(s)}else 0==e&&alert(t.retVal);loadCustomTabs(a,$("#paramHasread").val(),o,r)})}function loadCustomTabs(a,t,e,r){$.get(a+"/workflowrest/taburls/"+e+"/"+r+"/"+!1,function(e){var r=e.retCode;if(1==r)for(var o=0;o<e.dataRows.length;o++){var s=e.dataRows[o].name,d=a+"/"+e.dataRows[o].url+"?"+t,l="custom_tab"+(o+1),i="custom_div"+(o+1),n='<div role="tabpanel" class="tab-pane fade" id=\''+i+"Hasread'></div>",w="<li id='"+l+"Hasread' role='presentation'></li>",f="<a href='#"+i+"Hasread' aria-controls='"+i+'\' role="tab" data-toggle="tab">'+s+"</a>";$("#historyHasread").before(n),$("#"+i+"Hasread").load(d),$("#historyLiHasread").before(w),$("#"+l+"Hasread").append(f)}})}function loadHistoicFlow(a,t){$.get(a+"/workflowrest/histoicflow/"+t,function(a){var t=a.retCode;if(1==t){for(var e="",r=0;r<a.dataRows.length;r++){var o=a.dataRows[r].startTime;o=getSmpFormatDateByLong(o,!0);var s=a.dataRows[r].endTime;s=null==s?"":getSmpFormatDateByLong(s,!0);var d=r+1,l=a.dataRows[r].assigneeName,i=a.dataRows[r].fromUserName;1==a.dataRows[r].replace&&(l=l+"（ "+i+"——待办授权）"),e+="<tr><td>"+d+"</td><td>"+a.dataRows[r].linkName+"</td><td>"+l+"</td><td>"+a.dataRows[r].orgName+"</td><td>"+a.dataRows[r].handleType+"</td><td>"+o+"</td><td>"+s+'</td><td style="word-wrap:break-word;word-break:break-all;">'+a.dataRows[r].userComment+"</td></tr>"}$("#historyContentHasread").html(e)}else 0==t&&alert(a.retVal)})}function modal_close(){showHasReadList()}function showHasReadList(){serarchHasread(),$("#goRecordHasReadDetailHasread").hide(),$("#searchContentHasread").show()}$(function(){var a=$("#processDefinitionIdHasread").val(),t=$("#processInstanceIdHasread").val(),e=$("#taskDefinitionKeyHasread").val(),r=$("#idHasread").val();loadTaskPath(serverPath,t,r,e,a),loadHistoicFlow(serverPath,t),$("#diagramImgHasread").attr("src",serverPath+"/workflowrest/flowchart/"+t+"/"+parseInt(10*Math.random()))});